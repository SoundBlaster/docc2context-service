{"sections":[{"title":"Macros and Advanced Composition","estimatedTimeInMinutes":25,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Learn how to use Swift macros for elegant specification composition and build complex, real-world business rules. This tutorial covers the @specs and @AutoContext macros along with advanced testing patterns."}]}],"chapter":"Macros and Advanced Patterns","kind":"hero"},{"tasks":[{"stepsSection":[{"caption":[],"media":null,"content":[{"inlineContent":[{"type":"text","text":"Create composite specifications declaratively with @specs."}],"type":"paragraph"}],"type":"step","code":"macros-01-specs-basic.swift","runtimePreview":null},{"caption":[],"media":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Build complex multi-condition specifications."}]}],"type":"step","code":"macros-01-specs-complex.swift","runtimePreview":null}],"contentSection":[{"kind":"contentAndMedia","mediaPosition":"trailing","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The "},{"type":"codeVoice","code":"@specs"},{"type":"text","text":" macro enables declarative composition of specifications, reducing boilerplate and improving readability."}]}]}],"anchor":"specs-Macro-for-Composition","title":"@specs Macro for Composition"},{"stepsSection":[{"content":[{"inlineContent":[{"text":"Use @AutoContext for automatic provider injection.","type":"text"}],"type":"paragraph"}],"code":"macros-02-auto-context.swift","media":null,"runtimePreview":null,"type":"step","caption":[]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Combine @specs and @AutoContext for maximum expressiveness.","type":"text"}]}],"code":"macros-02-combined.swift","media":null,"runtimePreview":null,"type":"step","caption":[]}],"contentSection":[{"content":[{"type":"paragraph","inlineContent":[{"text":"The ","type":"text"},{"type":"codeVoice","code":"@AutoContext"},{"text":" macro automatically injects context provider access into your specifications, enabling cleaner evaluation patterns.","type":"text"}]}],"mediaPosition":"trailing","kind":"contentAndMedia"}],"anchor":"AutoContext-Macro","title":"@AutoContext Macro"},{"stepsSection":[{"caption":[],"media":null,"type":"step","content":[{"inlineContent":[{"type":"text","text":"Create e-commerce promotional specifications."}],"type":"paragraph"}],"code":"macros-03-ecommerce.swift","runtimePreview":null},{"caption":[],"type":"step","media":null,"content":[{"inlineContent":[{"type":"text","text":"Build subscription and access control specifications."}],"type":"paragraph"}],"code":"macros-03-subscription.swift","runtimePreview":null}],"contentSection":[{"mediaPosition":"trailing","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Build production-ready specifications for common use cases like promotional banners, subscription upgrades, and feature gating."}]}],"kind":"contentAndMedia"}],"anchor":"Complex-Real-World-Specifications","title":"Complex Real-World Specifications"},{"anchor":"Testing-and-Best-Practices","contentSection":[{"content":[{"inlineContent":[{"type":"text","text":"Use "},{"type":"reference","isActive":true,"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/MockContextProvider"},{"type":"text","text":" to create predictable, isolated test scenarios for complex specifications."}],"type":"paragraph"}],"kind":"contentAndMedia","mediaPosition":"trailing"}],"title":"Testing and Best Practices","stepsSection":[{"content":[{"inlineContent":[{"type":"text","text":"Test complex specifications with MockContextProvider."}],"type":"paragraph"}],"caption":[],"type":"step","code":"macros-04-testing.swift","runtimePreview":null,"media":null},{"content":[{"inlineContent":[{"text":"Follow best practices for specification design.","type":"text"}],"type":"paragraph"}],"caption":[],"type":"step","code":"macros-04-best-practices.swift","runtimePreview":null,"media":null}]}],"kind":"tasks"},{"anchor":"Check-Your-Understanding","kind":"assessments","assessments":[{"type":"multiple-choice","content":[],"title":[{"inlineContent":[{"text":"What is the primary benefit of using composite specifications?","type":"text"}],"type":"paragraph"}],"choices":[{"justification":[{"inlineContent":[{"text":"Performance is similar; the benefit is in code organization.","type":"text"}],"type":"paragraph"}],"isCorrect":false,"content":[{"inlineContent":[{"type":"text","text":"They execute faster than simple specifications."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"They encapsulate complex business rules into reusable components."}]}],"justification":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Composite specifications bundle related rules together, improving maintainability and reusability."}]}],"isCorrect":true},{"content":[{"inlineContent":[{"type":"text","text":"They automatically persist state."}],"type":"paragraph"}],"isCorrect":false,"justification":[{"inlineContent":[{"text":"Specifications are stateless; state is managed by context providers.","type":"text"}],"type":"paragraph"}]}]}]}],"variants":[{"paths":["\/tutorials\/specificationcore\/macrosandadvanced"],"traits":[{"interfaceLanguage":"swift"}]}],"schemaVersion":{"minor":3,"patch":0,"major":0},"hierarchy":{"modules":[{"reference":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/Tutorials\/Getting-Started","projects":[{"reference":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/SpecificationCore\/GettingStartedCore","sections":[{"kind":"task","reference":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/SpecificationCore\/GettingStartedCore#Understanding-Specifications"},{"kind":"task","reference":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/SpecificationCore\/GettingStartedCore#Using-Context-and-Providers"},{"kind":"task","reference":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/SpecificationCore\/GettingStartedCore#Composing-Specifications"},{"kind":"task","reference":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/SpecificationCore\/GettingStartedCore#Built-in-Specifications"},{"kind":"task","reference":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/SpecificationCore\/GettingStartedCore#Testing-Specifications"},{"kind":"assessment","reference":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/SpecificationCore\/GettingStartedCore#Check-Your-Understanding"}]}]},{"reference":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/Tutorials\/Property-Wrappers","projects":[{"sections":[{"reference":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/SpecificationCore\/PropertyWrappersGuide#Satisfies-Basics","kind":"task"},{"reference":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/SpecificationCore\/PropertyWrappersGuide#Decision-Specifications","kind":"task"},{"reference":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/SpecificationCore\/PropertyWrappersGuide#Async-Specifications","kind":"task"},{"reference":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/SpecificationCore\/PropertyWrappersGuide#Advanced-Patterns","kind":"task"}],"reference":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/SpecificationCore\/PropertyWrappersGuide"}]},{"reference":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/Tutorials\/Macros-and-Advanced-Patterns","projects":[{"reference":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/SpecificationCore\/MacrosAndAdvanced","sections":[{"reference":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/SpecificationCore\/MacrosAndAdvanced#specs-Macro-for-Composition","kind":"task"},{"reference":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/SpecificationCore\/MacrosAndAdvanced#AutoContext-Macro","kind":"task"},{"reference":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/SpecificationCore\/MacrosAndAdvanced#Complex-Real-World-Specifications","kind":"task"},{"reference":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/SpecificationCore\/MacrosAndAdvanced#Testing-and-Best-Practices","kind":"task"},{"reference":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/SpecificationCore\/MacrosAndAdvanced#Check-Your-Understanding","kind":"assessment"}]}]}],"paths":[["doc:\/\/specificationcore.SpecificationCore\/tutorials\/Tutorials","doc:\/\/specificationcore.SpecificationCore\/tutorials\/Tutorials\/$volume","doc:\/\/specificationcore.SpecificationCore\/tutorials\/Tutorials\/Macros-and-Advanced-Patterns"]],"reference":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/Tutorials"},"kind":"project","identifier":{"url":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/SpecificationCore\/MacrosAndAdvanced","interfaceLanguage":"swift"},"metadata":{"categoryPathComponent":"Tutorials","role":"project","category":"SpecificationCore Tutorials","title":"Macros and Advanced Composition"},"references":{"doc://specificationcore.SpecificationCore/tutorials/SpecificationCore/GettingStartedCore#Testing-Specifications":{"identifier":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/SpecificationCore\/GettingStartedCore#Testing-Specifications","abstract":[{"type":"text","text":"Learn how to implement the Specification Pattern in Swift using SpecificationCore. Create your first specifications, compose rules with logical operators, and evaluate them with context providers."}],"url":"\/tutorials\/specificationcore\/gettingstartedcore#Testing-Specifications","kind":"section","title":"Testing Specifications","type":"section","role":"pseudoSymbol"},"macros-03-ecommerce.swift":{"fileType":"swift","type":"file","fileName":"ECommerceSpec.swift","highlights":[],"identifier":"macros-03-ecommerce.swift","syntax":"swift","content":["import SpecificationCore","","\/\/ Real-world e-commerce promotional specifications","","struct ECommercePromoSpec: Specification {","    typealias T = EvaluationContext","","    private let composite: AnySpecification<EvaluationContext>","","    init() {","        \/\/ Show promo when:","        \/\/ 1. User browsed for at least 2 minutes","        \/\/ 2. Viewed at least 3 products","        \/\/ 3. No purchase in last 24 hours","        \/\/ 4. No promo shown in last 4 hours","","        let browsingTime = TimeSinceEventSpec.sinceAppLaunch(minutes: 2)","        let productViews = PredicateSpec<EvaluationContext>.counter(","            \"products_viewed\",","            .greaterThanOrEqual,","            3","        )","        let noPurchaseRecently = CooldownIntervalSpec(eventKey: \"last_purchase\", hours: 24)","        let promoCooldown = CooldownIntervalSpec(eventKey: \"last_promo\", hours: 4)","","        composite = AnySpecification(","            browsingTime","                .and(AnySpecification(productViews))","                .and(AnySpecification(noPurchaseRecently))","                .and(AnySpecification(promoCooldown))","        )","    }","","    func isSatisfiedBy(_ context: EvaluationContext) -> Bool {","        composite.isSatisfiedBy(context)","    }","}","","\/\/ Usage","let provider = DefaultContextProvider.shared","provider.setCounter(\"products_viewed\", to: 5)","","let promoSpec = ECommercePromoSpec()","let context = provider.currentContext()","","if promoSpec.isSatisfiedBy(context) {","    showDiscountBanner()","    provider.recordEvent(\"last_promo\")","}","","func showDiscountBanner() {","    print(\"10% off your next purchase!\")","}"]},"macros-04-best-practices.swift":{"highlights":[],"fileName":"BestPractices.swift","content":["import SpecificationCore","","\/\/ Best Practices for Specification Design","","\/\/ 1. Keep specifications focused and single-purpose","struct IsAdultSpec: Specification {","    func isSatisfiedBy(_ user: User) -> Bool {","        user.age >= 18","    }","}","","\/\/ 2. Use descriptive names that explain the business rule","struct CanReceiveMarketingEmailsSpec: Specification {","    func isSatisfiedBy(_ user: User) -> Bool {","        user.hasOptedInToMarketing && user.emailVerified","    }","}","","\/\/ 3. Compose complex rules from simple specifications","let eligibleForPromo = IsAdultSpec()","    .and(CanReceiveMarketingEmailsSpec())","","\/\/ 4. Use factory methods for common configurations","extension MaxCountSpec {","    static func dailyAPILimit() -> MaxCountSpec {","        MaxCountSpec(counterKey: \"daily_api_calls\", maximumCount: 1000)","    }","}","","\/\/ 5. Document business rules in specification comments","\/\/\/ Determines if a user qualifies for the loyalty program.","\/\/\/ Requirements:","\/\/\/ - Account age >= 90 days","\/\/\/ - Total purchases >= $100","\/\/\/ - No fraud flags","struct LoyaltyProgramEligibilitySpec: Specification {","    func isSatisfiedBy(_ user: User) -> Bool {","        user.accountAgeDays >= 90 && user.totalPurchaseAmount >= 100 && !user.hasFraudFlag","    }","}","","\/\/ 6. Use type-safe keys for counters and events","enum ContextKey {","    static let bannerShown = \"banner_shown\"","    static let lastPromo = \"last_promo\"","    static let appLaunches = \"app_launches\"","}","","let spec = MaxCountSpec(counterKey: ContextKey.bannerShown, maximumCount: 3)","","\/\/ Supporting types","struct User {","    let age: Int","    let hasOptedInToMarketing: Bool","    let emailVerified: Bool","    let accountAgeDays: Int","    let totalPurchaseAmount: Double","    let hasFraudFlag: Bool","}"],"fileType":"swift","type":"file","identifier":"macros-04-best-practices.swift","syntax":"swift"},"doc://specificationcore.SpecificationCore/tutorials/SpecificationCore/MacrosAndAdvanced":{"estimatedTime":"25min","type":"topic","kind":"project","url":"\/tutorials\/specificationcore\/macrosandadvanced","title":"Macros and Advanced Composition","identifier":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/SpecificationCore\/MacrosAndAdvanced","abstract":[{"text":"Learn how to use Swift macros for elegant specification composition and build complex, real-world business rules. This tutorial covers the @specs and @AutoContext macros along with advanced testing patterns.","type":"text"}],"role":"project"},"doc://specificationcore.SpecificationCore/tutorials/SpecificationCore/GettingStartedCore#Understanding-Specifications":{"type":"section","kind":"section","abstract":[{"type":"text","text":"Learn how to implement the Specification Pattern in Swift using SpecificationCore. Create your first specifications, compose rules with logical operators, and evaluate them with context providers."}],"url":"\/tutorials\/specificationcore\/gettingstartedcore#Understanding-Specifications","title":"Understanding Specifications","identifier":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/SpecificationCore\/GettingStartedCore#Understanding-Specifications","role":"pseudoSymbol"},"doc://specificationcore.SpecificationCore/tutorials/SpecificationCore/MacrosAndAdvanced#Complex-Real-World-Specifications":{"type":"section","kind":"section","abstract":[{"text":"Learn how to use Swift macros for elegant specification composition and build complex, real-world business rules. This tutorial covers the @specs and @AutoContext macros along with advanced testing patterns.","type":"text"}],"url":"\/tutorials\/specificationcore\/macrosandadvanced#Complex-Real-World-Specifications","title":"Complex Real-World Specifications","identifier":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/SpecificationCore\/MacrosAndAdvanced#Complex-Real-World-Specifications","role":"pseudoSymbol"},"macros-04-testing.swift":{"fileType":"swift","type":"file","fileName":"SpecificationTests.swift","highlights":[],"identifier":"macros-04-testing.swift","syntax":"swift","content":["import SpecificationCore","import XCTest","","final class ComplexSpecificationTests: XCTestCase {","    var mockProvider: MockContextProvider!","","    override func setUp() {","        super.setUp()","        mockProvider = MockContextProvider()","    }","","    func testPromoSpecShowsForEngagedUser() {","        \/\/ Setup: User has viewed products and no recent promo","        mockProvider.setCounter(\"products_viewed\", to: 5)","        mockProvider.setCounter(\"app_launches\", to: 10)","","        let spec = ECommercePromoSpec()","        let context = mockProvider.currentContext()","","        \/\/ Should show promo for engaged user","        XCTAssertTrue(spec.isSatisfiedBy(context))","    }","","    func testPromoSpecHidesAfterRecentPurchase() {","        \/\/ Setup: User has purchased recently","        mockProvider.setCounter(\"products_viewed\", to: 5)","        mockProvider.recordEvent(\"last_purchase\") \/\/ Just now","","        let spec = ECommercePromoSpec()","        let context = mockProvider.currentContext()","","        \/\/ Should NOT show promo after recent purchase","        XCTAssertFalse(spec.isSatisfiedBy(context))","    }","","    func testUpgradePromptForFreemiumUser() {","        \/\/ Setup: Active free user who uses premium features","        mockProvider.setCounter(\"days_active\", to: 14)","        mockProvider.setCounter(\"premium_feature_usage\", to: 8)","        mockProvider.setCounter(\"app_opens\", to: 25)","        mockProvider.setFlag(\"is_premium\", to: false)","","        let spec = UpgradePromptSpec()","        let context = mockProvider.currentContext()","","        XCTAssertTrue(spec.isSatisfiedBy(context))","    }","","    func testUpgradePromptHiddenForPremiumUser() {","        \/\/ Setup: Already premium","        mockProvider.setCounter(\"days_active\", to: 14)","        mockProvider.setFlag(\"is_premium\", to: true)","","        let spec = UpgradePromptSpec()","        let context = mockProvider.currentContext()","","        \/\/ Premium users should NOT see upgrade prompt","        XCTAssertFalse(spec.isSatisfiedBy(context))","    }","}"]},"doc://specificationcore.SpecificationCore/tutorials/SpecificationCore/PropertyWrappersGuide#Advanced-Patterns":{"type":"section","kind":"section","abstract":[{"type":"text","text":"Learn how to use SpecificationCore’s property wrappers for clean, declarative specification evaluation. Property wrappers like "},{"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/Satisfies","type":"reference","isActive":true},{"type":"text","text":", "},{"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/Decides","type":"reference","isActive":true},{"type":"text","text":", and "},{"isActive":true,"type":"reference","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/Maybe"},{"type":"text","text":" simplify specification usage throughout your application."}],"url":"\/tutorials\/specificationcore\/propertywrappersguide#Advanced-Patterns","title":"Advanced Patterns","identifier":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/SpecificationCore\/PropertyWrappersGuide#Advanced-Patterns","role":"pseudoSymbol"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/Decides":{"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/Decides","kind":"symbol","type":"topic","abstract":[{"text":"A property wrapper that evaluates decision specifications and always returns a non-optional result.","type":"text"}],"title":"Decides","navigatorTitle":[{"text":"Decides","kind":"identifier"}],"url":"\/documentation\/specificationcore\/decides","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Decides","kind":"identifier"}],"role":"symbol"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/MockContextProvider":{"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/MockContextProvider","kind":"symbol","type":"topic","abstract":[{"text":"A mock context provider designed for unit testing.","type":"text"},{"text":" ","type":"text"},{"text":"This provider allows you to set up specific context scenarios","type":"text"},{"text":" ","type":"text"},{"text":"and verify that specifications behave correctly under controlled conditions.","type":"text"}],"title":"MockContextProvider","navigatorTitle":[{"text":"MockContextProvider","kind":"identifier"}],"url":"\/documentation\/specificationcore\/mockcontextprovider","fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"text":"MockContextProvider","kind":"identifier"}],"role":"symbol"},"macros-01-specs-complex.swift":{"highlights":[],"fileName":"ComplexSpecsExample.swift","content":["import SpecificationCore","","\/\/ Build complex multi-condition specifications","struct FeatureGatingSpec: Specification {","    typealias T = EvaluationContext","","    private let composite: AnySpecification<EvaluationContext>","","    init(","        featureFlag: String,","        minAppLaunches: Int = 5,","        requirePremium: Bool = false","    ) {","        var specs: [AnySpecification<EvaluationContext>] = []","","        \/\/ Feature must be enabled","        specs.append(","            AnySpecification { context in","                context.flag(for: featureFlag)","            })","","        \/\/ User must have launched app minimum times","        specs.append(","            AnySpecification { context in","                context.counter(for: \"app_launches\") >= minAppLaunches","            })","","        \/\/ Optional premium requirement","        if requirePremium {","            specs.append(","                AnySpecification { context in","                    context.flag(for: \"is_premium\")","                })","        }","","        composite = specs.allSatisfied()","    }","","    func isSatisfiedBy(_ context: EvaluationContext) -> Bool {","        composite.isSatisfiedBy(context)","    }","}","","\/\/ Usage","let advancedFeature = FeatureGatingSpec(","    featureFlag: \"advanced_analytics\",","    minAppLaunches: 10,","    requirePremium: true",")"],"fileType":"swift","type":"file","identifier":"macros-01-specs-complex.swift","syntax":"swift"},"doc://specificationcore.SpecificationCore/tutorials/SpecificationCore/GettingStartedCore#Built-in-Specifications":{"type":"section","kind":"section","url":"\/tutorials\/specificationcore\/gettingstartedcore#Built-in-Specifications","title":"Built-in Specifications","identifier":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/SpecificationCore\/GettingStartedCore#Built-in-Specifications","abstract":[{"text":"Learn how to implement the Specification Pattern in Swift using SpecificationCore. Create your first specifications, compose rules with logical operators, and evaluate them with context providers.","type":"text"}],"role":"pseudoSymbol"},"doc://specificationcore.SpecificationCore/tutorials/SpecificationCore/GettingStartedCore#Check-Your-Understanding":{"titleInlineContent":[{"type":"text","text":"Check Your Understanding"}],"type":"link","identifier":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/SpecificationCore\/GettingStartedCore#Check-Your-Understanding","url":"\/tutorials\/specificationcore\/gettingstartedcore#Check-Your-Understanding","title":"Check Your Understanding"},"doc://specificationcore.SpecificationCore/tutorials/SpecificationCore/GettingStartedCore#Using-Context-and-Providers":{"kind":"section","title":"Using Context and Providers","abstract":[{"text":"Learn how to implement the Specification Pattern in Swift using SpecificationCore. Create your first specifications, compose rules with logical operators, and evaluate them with context providers.","type":"text"}],"type":"section","identifier":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/SpecificationCore\/GettingStartedCore#Using-Context-and-Providers","role":"pseudoSymbol","url":"\/tutorials\/specificationcore\/gettingstartedcore#Using-Context-and-Providers"},"doc://specificationcore.SpecificationCore/tutorials/SpecificationCore/PropertyWrappersGuide#Decision-Specifications":{"type":"section","kind":"section","abstract":[{"type":"text","text":"Learn how to use SpecificationCore’s property wrappers for clean, declarative specification evaluation. Property wrappers like "},{"type":"reference","isActive":true,"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/Satisfies"},{"type":"text","text":", "},{"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/Decides","type":"reference","isActive":true},{"text":", and ","type":"text"},{"type":"reference","isActive":true,"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/Maybe"},{"type":"text","text":" simplify specification usage throughout your application."}],"url":"\/tutorials\/specificationcore\/propertywrappersguide#Decision-Specifications","title":"Decision Specifications","identifier":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/SpecificationCore\/PropertyWrappersGuide#Decision-Specifications","role":"pseudoSymbol"},"doc://specificationcore.SpecificationCore/tutorials/SpecificationCore/PropertyWrappersGuide#Satisfies-Basics":{"type":"section","kind":"section","url":"\/tutorials\/specificationcore\/propertywrappersguide#Satisfies-Basics","title":"@Satisfies Basics","identifier":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/SpecificationCore\/PropertyWrappersGuide#Satisfies-Basics","abstract":[{"type":"text","text":"Learn how to use SpecificationCore’s property wrappers for clean, declarative specification evaluation. Property wrappers like "},{"type":"reference","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/Satisfies","isActive":true},{"type":"text","text":", "},{"type":"reference","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/Decides","isActive":true},{"type":"text","text":", and "},{"type":"reference","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/Maybe","isActive":true},{"type":"text","text":" simplify specification usage throughout your application."}],"role":"pseudoSymbol"},"doc://specificationcore.SpecificationCore/tutorials/SpecificationCore/PropertyWrappersGuide":{"estimatedTime":"20min","type":"topic","kind":"project","url":"\/tutorials\/specificationcore\/propertywrappersguide","title":"Property Wrappers for Declarative Evaluation","identifier":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/SpecificationCore\/PropertyWrappersGuide","abstract":[{"text":"Learn how to use SpecificationCore’s property wrappers for clean, declarative specification evaluation. Property wrappers like ","type":"text"},{"isActive":true,"type":"reference","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/Satisfies"},{"text":", ","type":"text"},{"isActive":true,"type":"reference","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/Decides"},{"text":", and ","type":"text"},{"isActive":true,"type":"reference","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/Maybe"},{"text":" simplify specification usage throughout your application.","type":"text"}],"role":"project"},"macros-01-specs-basic.swift":{"fileType":"swift","type":"file","fileName":"SpecsMacroExample.swift","highlights":[],"identifier":"macros-01-specs-basic.swift","syntax":"swift","content":["import SpecificationCore","","\/\/ Create composite specifications using @specs macro","\/\/ Note: Requires SpecificationCoreMacros module","","\/\/ Traditional approach (without macro)","struct BannerEligibilitySpec: Specification {","    typealias T = EvaluationContext","","    let timeSinceLaunch = TimeSinceEventSpec.sinceAppLaunch(seconds: 10)","    let maxCount = MaxCountSpec(counterKey: \"banner_shown\", maximumCount: 3)","    let cooldown = CooldownIntervalSpec(eventKey: \"last_banner\", days: 1)","","    func isSatisfiedBy(_ context: EvaluationContext) -> Bool {","        timeSinceLaunch.isSatisfiedBy(context) && maxCount.isSatisfiedBy(context)","            && cooldown.isSatisfiedBy(context)","    }","}","","\/\/ With predefined CompositeSpec","let promoBanner = CompositeSpec.promoBanner","let ratingPrompt = CompositeSpec.ratingPrompt"]},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/Maybe":{"navigatorTitle":[{"text":"Maybe","kind":"identifier"}],"type":"topic","kind":"symbol","url":"\/documentation\/specificationcore\/maybe","title":"Maybe","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/Maybe","abstract":[{"text":"A property wrapper that evaluates decision specifications and returns an optional result.","type":"text"}],"role":"symbol","fragments":[{"kind":"keyword","text":"struct"},{"text":" ","kind":"text"},{"text":"Maybe","kind":"identifier"}]},"doc://specificationcore.SpecificationCore/tutorials/SpecificationCore/MacrosAndAdvanced#AutoContext-Macro":{"type":"section","kind":"section","url":"\/tutorials\/specificationcore\/macrosandadvanced#AutoContext-Macro","title":"@AutoContext Macro","identifier":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/SpecificationCore\/MacrosAndAdvanced#AutoContext-Macro","abstract":[{"type":"text","text":"Learn how to use Swift macros for elegant specification composition and build complex, real-world business rules. This tutorial covers the @specs and @AutoContext macros along with advanced testing patterns."}],"role":"pseudoSymbol"},"doc://specificationcore.SpecificationCore/tutorials/SpecificationCore/MacrosAndAdvanced#Check-Your-Understanding":{"titleInlineContent":[{"type":"text","text":"Check Your Understanding"}],"type":"link","identifier":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/SpecificationCore\/MacrosAndAdvanced#Check-Your-Understanding","url":"\/tutorials\/specificationcore\/macrosandadvanced#Check-Your-Understanding","title":"Check Your Understanding"},"doc://specificationcore.SpecificationCore/tutorials/SpecificationCore/MacrosAndAdvanced#specs-Macro-for-Composition":{"type":"section","kind":"section","url":"\/tutorials\/specificationcore\/macrosandadvanced#specs-Macro-for-Composition","title":"@specs Macro for Composition","identifier":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/SpecificationCore\/MacrosAndAdvanced#specs-Macro-for-Composition","abstract":[{"type":"text","text":"Learn how to use Swift macros for elegant specification composition and build complex, real-world business rules. This tutorial covers the @specs and @AutoContext macros along with advanced testing patterns."}],"role":"pseudoSymbol"},"doc://specificationcore.SpecificationCore/tutorials/Tutorials":{"kind":"overview","title":"Learn the Specification Pattern","abstract":[{"text":"Master the Specification pattern in Swift using SpecificationCore. Learn to build testable, composable business rules from simple primitives to advanced macro-assisted patterns.","type":"text"}],"type":"topic","identifier":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/Tutorials","role":"overview","url":"\/tutorials\/tutorials"},"macros-02-combined.swift":{"highlights":[],"fileName":"CombinedMacrosExample.swift","content":["import SpecificationCore","","\/\/ Combine patterns for maximum expressiveness","","\/\/ Create a reusable specification factory","enum SpecificationFactory {","    \/\/ Promotional content specifications","    static func promoBanner(","        maxShows: Int = 3,","        cooldownHours: TimeInterval = 24","    ) -> AnySpecification<EvaluationContext> {","        let maxCount = MaxCountSpec(counterKey: \"promo_shown\", maximumCount: maxShows)","        let cooldown = CooldownIntervalSpec(eventKey: \"last_promo\", hours: cooldownHours)","        return AnySpecification(maxCount.and(cooldown))","    }","","    \/\/ Feature gating specifications","    static func featureGate(","        flag: String,","        requiresEngagement: Bool = false","    ) -> AnySpecification<EvaluationContext> {","        var specs: [AnySpecification<EvaluationContext>] = [","            AnySpecification { $0.flag(for: flag) }","        ]","","        if requiresEngagement {","            specs.append(AnySpecification { $0.counter(for: \"sessions\") >= 5 })","        }","","        return specs.allSatisfied()","    }","","    \/\/ Rate limiting specifications","    static func rateLimit(","        action: String,","        maxPerHour: Int","    ) -> AnySpecification<EvaluationContext> {","        AnySpecification(MaxCountSpec(counterKey: \"\\(action)_hourly\", maximumCount: maxPerHour))","    }","}","","\/\/ Usage","let promo = SpecificationFactory.promoBanner(maxShows: 2, cooldownHours: 48)","let feature = SpecificationFactory.featureGate(flag: \"new_ui\", requiresEngagement: true)","let rateLimit = SpecificationFactory.rateLimit(action: \"api_call\", maxPerHour: 100)"],"fileType":"swift","type":"file","identifier":"macros-02-combined.swift","syntax":"swift"},"macros-02-auto-context.swift":{"fileType":"swift","type":"file","fileName":"AutoContextExample.swift","highlights":[],"identifier":"macros-02-auto-context.swift","syntax":"swift","content":["import SpecificationCore","","\/\/ @AutoContext enables automatic context provider access","\/\/ The macro synthesizes an isSatisfied property that uses the default provider","","\/\/ Without @AutoContext - manual context access","struct ManualBannerSpec: Specification {","    typealias T = EvaluationContext","","    func isSatisfiedBy(_ context: EvaluationContext) -> Bool {","        context.counter(for: \"banner_shown\") < 3 && context.timeSinceLaunch >= 10","    }","","    \/\/ Manual evaluation requires provider","    func evaluate(using provider: some ContextProviding) -> Bool {","        isSatisfiedBy(provider.currentContext())","    }","}","","\/\/ With @AutoContext (when using SpecificationCoreMacros)","\/\/ @AutoContext","\/\/ struct AutoBannerSpec: Specification {","\/\/     typealias T = EvaluationContext","\/\/","\/\/     func isSatisfiedBy(_ context: EvaluationContext) -> Bool {","\/\/         context.counter(for: \"banner_shown\") < 3","\/\/     }","\/\/","\/\/     \/\/ Synthesized: var isSatisfied: Bool (uses DefaultContextProvider.shared)","\/\/ }","","\/\/ Usage pattern","let spec = ManualBannerSpec()","let context = DefaultContextProvider.shared.currentContext()","let canShow = spec.isSatisfiedBy(context)"]},"macros-03-subscription.swift":{"highlights":[],"fileName":"SubscriptionSpec.swift","content":["import SpecificationCore","","\/\/ Subscription upgrade prompt specifications","","struct UpgradePromptSpec: Specification {","    typealias T = EvaluationContext","","    private let composite: AnySpecification<EvaluationContext>","","    init() {","        \/\/ Show upgrade prompt when:","        \/\/ 1. User has been active for 7+ days","        \/\/ 2. Used premium features 5+ times","        \/\/ 3. Is NOT already a premium subscriber","        \/\/ 4. Haven't shown upgrade prompt in 3 days","        \/\/ 5. Has opened app 10+ times","","        let activeUser = PredicateSpec<EvaluationContext>.counter(","            \"days_active\",","            .greaterThanOrEqual,","            7","        )","        let premiumUsage = PredicateSpec<EvaluationContext>.counter(","            \"premium_feature_usage\",","            .greaterThanOrEqual,","            5","        )","        let notPremium = PredicateSpec<EvaluationContext>.flag(","            \"is_premium\",","            equals: false","        )","        let promptCooldown = CooldownIntervalSpec(eventKey: \"last_upgrade_prompt\", days: 3)","        let engagedUser = PredicateSpec<EvaluationContext>.counter(","            \"app_opens\",","            .greaterThanOrEqual,","            10","        )","","        composite = AnySpecification(","            activeUser","                .and(AnySpecification(premiumUsage))","                .and(AnySpecification(notPremium))","                .and(AnySpecification(promptCooldown))","                .and(AnySpecification(engagedUser))","        )","    }","","    func isSatisfiedBy(_ context: EvaluationContext) -> Bool {","        composite.isSatisfiedBy(context)","    }","}","","\/\/ Tiered access control","struct TierAccessSpec: Specification {","    typealias T = EvaluationContext","","    let requiredTier: String","","    func isSatisfiedBy(_ context: EvaluationContext) -> Bool {","        guard let userTier = context.userData[\"subscription_tier\"] as? String else {","            return false","        }","        let tierOrder = [\"free\", \"basic\", \"premium\", \"enterprise\"]","        guard let userIndex = tierOrder.firstIndex(of: userTier),","              let requiredIndex = tierOrder.firstIndex(of: requiredTier)","        else {","            return false","        }","        return userIndex >= requiredIndex","    }","}"],"fileType":"swift","type":"file","identifier":"macros-03-subscription.swift","syntax":"swift"},"doc://specificationcore.SpecificationCore/tutorials/SpecificationCore/GettingStartedCore#Composing-Specifications":{"type":"section","kind":"section","url":"\/tutorials\/specificationcore\/gettingstartedcore#Composing-Specifications","title":"Composing Specifications","identifier":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/SpecificationCore\/GettingStartedCore#Composing-Specifications","abstract":[{"type":"text","text":"Learn how to implement the Specification Pattern in Swift using SpecificationCore. Create your first specifications, compose rules with logical operators, and evaluate them with context providers."}],"role":"pseudoSymbol"},"doc://specificationcore.SpecificationCore/tutorials/SpecificationCore/PropertyWrappersGuide#Async-Specifications":{"role":"pseudoSymbol","title":"Async Specifications","identifier":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/SpecificationCore\/PropertyWrappersGuide#Async-Specifications","kind":"section","url":"\/tutorials\/specificationcore\/propertywrappersguide#Async-Specifications","type":"section","abstract":[{"text":"Learn how to use SpecificationCore’s property wrappers for clean, declarative specification evaluation. Property wrappers like ","type":"text"},{"isActive":true,"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/Satisfies","type":"reference"},{"text":", ","type":"text"},{"isActive":true,"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/Decides","type":"reference"},{"text":", and ","type":"text"},{"isActive":true,"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/Maybe","type":"reference"},{"text":" simplify specification usage throughout your application.","type":"text"}]},"doc://specificationcore.SpecificationCore/tutorials/SpecificationCore/GettingStartedCore":{"estimatedTime":"25min","type":"topic","kind":"project","url":"\/tutorials\/specificationcore\/gettingstartedcore","title":"Getting Started with SpecificationCore","identifier":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/SpecificationCore\/GettingStartedCore","abstract":[{"type":"text","text":"Learn how to implement the Specification Pattern in Swift using SpecificationCore. Create your first specifications, compose rules with logical operators, and evaluate them with context providers."}],"role":"project"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/Satisfies":{"url":"\/documentation\/specificationcore\/satisfies","type":"topic","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/Satisfies","role":"symbol","title":"Satisfies","abstract":[{"type":"text","text":"A property wrapper that provides declarative specification evaluation."}],"navigatorTitle":[{"kind":"identifier","text":"Satisfies"}],"kind":"symbol","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Satisfies","kind":"identifier"}]},"doc://specificationcore.SpecificationCore/tutorials/SpecificationCore/MacrosAndAdvanced#Testing-and-Best-Practices":{"kind":"section","title":"Testing and Best Practices","abstract":[{"type":"text","text":"Learn how to use Swift macros for elegant specification composition and build complex, real-world business rules. This tutorial covers the @specs and @AutoContext macros along with advanced testing patterns."}],"type":"section","identifier":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/SpecificationCore\/MacrosAndAdvanced#Testing-and-Best-Practices","role":"pseudoSymbol","url":"\/tutorials\/specificationcore\/macrosandadvanced#Testing-and-Best-Practices"},"doc://specificationcore.SpecificationCore/tutorials/Tutorials/Property-Wrappers":{"type":"topic","kind":"article","abstract":[],"url":"\/tutorials\/tutorials\/property-wrappers","title":"Property Wrappers","identifier":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/Tutorials\/Property-Wrappers","role":"article"},"doc://specificationcore.SpecificationCore/tutorials/Tutorials/Getting-Started":{"title":"Getting Started","kind":"article","abstract":[],"type":"topic","identifier":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/Tutorials\/Getting-Started","role":"article","url":"\/tutorials\/tutorials\/getting-started"},"doc://specificationcore.SpecificationCore/tutorials/Tutorials/Macros-and-Advanced-Patterns":{"type":"topic","kind":"article","url":"\/tutorials\/tutorials\/macros-and-advanced-patterns","title":"Macros and Advanced Patterns","identifier":"doc:\/\/specificationcore.SpecificationCore\/tutorials\/Tutorials\/Macros-and-Advanced-Patterns","abstract":[],"role":"article"}}}