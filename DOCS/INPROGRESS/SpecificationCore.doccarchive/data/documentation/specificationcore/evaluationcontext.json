{"abstract":[{"text":"A context object that holds data needed for specification evaluation.","type":"text"},{"type":"text","text":" "},{"type":"text","text":"This serves as a container for all the information that specifications might need"},{"text":" ","type":"text"},{"type":"text","text":"to make their decisions, such as timestamps, counters, user state, etc."}],"sections":[],"identifier":{"url":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext","interfaceLanguage":"swift"},"primaryContentSections":[{"kind":"declarations","declarations":[{"platforms":["macOS"],"languages":["swift"],"tokens":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"EvaluationContext"}]}]},{"kind":"content","content":[{"type":"heading","anchor":"overview","text":"Overview","level":2},{"type":"paragraph","inlineContent":[{"text":"A context object that holds data needed for specification evaluation.","type":"text"}]},{"level":2,"text":"Overview","anchor":"Overview","type":"heading"},{"inlineContent":[{"code":"EvaluationContext","type":"codeVoice"},{"type":"text","text":" is a value type that serves as a container for all the information specifications might need to make their decisions. It provides structured storage for timestamps, counters, feature flags, events, user data, and segments."}],"type":"paragraph"},{"text":"Key Benefits","anchor":"Key-Benefits","type":"heading","level":3},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"Structured Data","type":"text"}]},{"type":"text","text":": Organized storage for different types of runtime data"}]}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Value Semantics"}]},{"text":": Immutable struct with copy-on-write behavior","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"Type Safety","type":"text"}],"type":"strong"},{"text":": Strongly-typed access methods with safe defaults","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Builder Pattern"}]},{"type":"text","text":": Convenient methods for creating modified copies"}]}]},{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"Platform Independent"}],"type":"strong"},{"text":": Works across all Swift platforms","type":"text"}],"type":"paragraph"}]}]},{"level":3,"text":"When to Use EvaluationContext","anchor":"When-to-Use-EvaluationContext","type":"heading"},{"inlineContent":[{"type":"text","text":"Use "},{"type":"codeVoice","code":"EvaluationContext"},{"text":" when you need to:","type":"text"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"Provide runtime data to specifications"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Track counters, flags, and events for business logic","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Pass contextual information through specification evaluation","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Test specifications with controlled context scenarios"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Store user segments and feature toggles"}],"type":"paragraph"}]}]},{"type":"heading","level":2,"text":"Quick Example","anchor":"Quick-Example"},{"type":"codeListing","syntax":"swift","code":["import SpecificationCore","","\/\/ Create a context","let context = EvaluationContext(","    currentDate: Date(),","    flags: [\"premium_features\": true],","    counters: [\"api_calls\": 50],","    events: [\"last_login\": Date()]",")","","\/\/ Access data","let hasPremium = context.flag(for: \"premium_features\")  \/\/ true","let callCount = context.counter(for: \"api_calls\")  \/\/ 50","let lastLogin = context.event(for: \"last_login\")  \/\/ Date?","","\/\/ Use with specifications","struct FeatureFlagSpec: Specification {","    let flagKey: String","","    func isSatisfiedBy(_ context: EvaluationContext) -> Bool {","        context.flag(for: flagKey)","    }","}","","let spec = FeatureFlagSpec(flagKey: \"premium_features\")","spec.isSatisfiedBy(context)  \/\/ true"]},{"type":"heading","level":2,"text":"Context Properties","anchor":"Context-Properties"},{"type":"heading","level":3,"text":"Timestamps","anchor":"Timestamps"},{"type":"codeListing","syntax":"swift","code":["\/\/ Current date for time-based evaluations","let context = EvaluationContext(","    currentDate: Date(),","    launchDate: Date().addingTimeInterval(-3600)  \/\/ 1 hour ago",")","","\/\/ Access timestamps","let now = context.currentDate","let launch = context.launchDate","let runtime = context.timeSinceLaunch  \/\/ 3600 seconds"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"###Counters"}]},{"type":"paragraph","inlineContent":[{"text":"Store and retrieve integer counters:","type":"text"}]},{"type":"codeListing","code":["let context = EvaluationContext(","    counters: [","        \"login_attempts\": 3,","        \"api_calls_today\": 150,","        \"items_in_cart\": 5","    ]",")","","\/\/ Safe access with default value","let attempts = context.counter(for: \"login_attempts\")  \/\/ 3","let missing = context.counter(for: \"nonexistent\")  \/\/ 0 (default)","","\/\/ Use with MaxCountSpec","let spec = MaxCountSpec(counterKey: \"login_attempts\", maximumCount: 5)","spec.isSatisfiedBy(context)  \/\/ true (3 < 5)"],"syntax":"swift"},{"type":"heading","level":3,"text":"Feature Flags","anchor":"Feature-Flags"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Store and retrieve boolean feature toggles:"}]},{"type":"codeListing","code":["let context = EvaluationContext(","    flags: [","        \"dark_mode\": true,","        \"beta_features\": false,","        \"analytics_enabled\": true","    ]",")","","\/\/ Safe access with false default","let darkMode = context.flag(for: \"dark_mode\")  \/\/ true","let missing = context.flag(for: \"nonexistent\")  \/\/ false (default)","","\/\/ Use with feature flag specs","if context.flag(for: \"beta_features\") {","    \/\/ Show beta UI","}"],"syntax":"swift"},{"type":"heading","level":3,"text":"Events","anchor":"Events"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Store and retrieve event timestamps:"}]},{"type":"codeListing","code":["let lastNotification = Date().addingTimeInterval(-7200)  \/\/ 2 hours ago","","let context = EvaluationContext(","    events: [","        \"last_notification\": lastNotification,","        \"last_purchase\": Date().addingTimeInterval(-86400),  \/\/ 1 day ago","        \"registration_date\": Date().addingTimeInterval(-604800)  \/\/ 1 week ago","    ]",")","","\/\/ Access events","let eventDate = context.event(for: \"last_notification\")  \/\/ Date?","","\/\/ Calculate time since event","if let timeSince = context.timeSinceEvent(\"last_notification\") {","    print(\"Last notification was \\(timeSince) seconds ago\")  \/\/ 7200","}","","\/\/ Use with time-based specs","let cooldown = CooldownIntervalSpec(","    eventKey: \"last_notification\",","    interval: 3600  \/\/ 1 hour cooldown",")","cooldown.isSatisfiedBy(context)  \/\/ true (7200 > 3600)"],"syntax":"swift"},{"type":"heading","level":3,"text":"User Data","anchor":"User-Data"},{"type":"paragraph","inlineContent":[{"text":"Store arbitrary typed data:","type":"text"}]},{"type":"codeListing","code":["struct UserProfile {","    let tier: String","    let verified: Bool","}","","let profile = UserProfile(tier: \"premium\", verified: true)","","let context = EvaluationContext(","    userData: [","        \"user_profile\": profile,","        \"user_id\": \"123456\",","        \"subscription_end\": Date().addingTimeInterval(2592000)  \/\/ 30 days","    ]",")","","\/\/ Type-safe access","let userProfile = context.userData(for: \"user_profile\", as: UserProfile.self)","let userId = context.userData(for: \"user_id\", as: String.self)","let endDate = context.userData(for: \"subscription_end\", as: Date.self)","","\/\/ Use in custom specifications","struct ProfileSpec: Specification {","    func isSatisfiedBy(_ context: EvaluationContext) -> Bool {","        guard let profile = context.userData(for: \"user_profile\", as: UserProfile.self) else {","            return false","        }","        return profile.tier == \"premium\" && profile.verified","    }","}"],"syntax":"swift"},{"type":"heading","level":3,"text":"Segments","anchor":"Segments"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Store user segments as a set:"}]},{"type":"codeListing","code":["let context = EvaluationContext(","    segments: [\"vip\", \"beta_tester\", \"early_adopter\"]",")","","\/\/ Check segment membership","let isVIP = context.segments.contains(\"vip\")  \/\/ true","let isBeta = context.segments.contains(\"beta_tester\")  \/\/ true","let isAdmin = context.segments.contains(\"admin\")  \/\/ false","","\/\/ Use with segment-based specs","struct SegmentSpec: Specification {","    let requiredSegment: String","","    func isSatisfiedBy(_ context: EvaluationContext) -> Bool {","        context.segments.contains(requiredSegment)","    }","}"],"syntax":"swift"},{"type":"heading","level":2,"text":"Builder Pattern","anchor":"Builder-Pattern"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Create modified copies of contexts:"}]},{"type":"codeListing","code":["\/\/ Start with a base context","let base = EvaluationContext(","    flags: [\"feature_a\": true],","    counters: [\"count\": 10]",")","","\/\/ Create variations using builder methods","let updated = base","    .withFlags([\"feature_a\": true, \"feature_b\": true])  \/\/ Add more flags","    .withCounters([\"count\": 11])  \/\/ Update counters","    .withCurrentDate(Date())  \/\/ Update timestamp","","\/\/ Each method returns a new context (value semantics)","print(base.counters[\"count\"])  \/\/ 10 (unchanged)","print(updated.counters[\"count\"])  \/\/ 11 (modified)"],"syntax":"swift"},{"type":"heading","level":3,"text":"Individual Builder Methods","anchor":"Individual-Builder-Methods"},{"type":"codeListing","code":["let context = EvaluationContext()","","\/\/ Build step by step","let configured = context","    .withFlags([\"premium\": true, \"trial\": false])","    .withCounters([\"logins\": 5])","    .withEvents([\"last_action\": Date()])","    .withUserData([\"user_id\": \"abc123\"])","    .withCurrentDate(Date())","","\/\/ All builder methods return new contexts"],"syntax":"swift"},{"type":"heading","level":2,"text":"Working with DefaultContextProvider","anchor":"Working-with-DefaultContextProvider"},{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"EvaluationContext"},{"type":"text","text":" is typically created by "},{"isActive":true,"type":"reference","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider"},{"type":"text","text":":"}]},{"type":"codeListing","code":["let provider = DefaultContextProvider.shared","","\/\/ Configure provider state","provider.setFlag(\"dark_mode\", to: true)","provider.setCounter(\"app_launches\", to: 1)","provider.recordEvent(\"first_launch\")","","\/\/ Get context from provider","let context = provider.currentContext()","","\/\/ Context contains all configured data","let darkModeEnabled = context.flag(for: \"dark_mode\")  \/\/ true","let launches = context.counter(for: \"app_launches\")  \/\/ 1","let firstLaunch = context.event(for: \"first_launch\")  \/\/ Date"],"syntax":"swift"},{"type":"heading","level":2,"text":"Testing with EvaluationContext","anchor":"Testing-with-EvaluationContext"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Create test contexts with specific scenarios:"}]},{"type":"codeListing","code":["\/\/ Test counter limits","let limitContext = EvaluationContext(","    counters: [\"attempts\": 5]",")","","let limitSpec = MaxCountSpec(counterKey: \"attempts\", maximumCount: 3)","XCTAssertFalse(limitSpec.isSatisfiedBy(limitContext))  \/\/ 5 > 3","","\/\/ Test cooldown periods","let cooldownContext = EvaluationContext(","    currentDate: Date(),","    events: [\"last_action\": Date().addingTimeInterval(-1800)]  \/\/ 30 min ago",")","","let cooldownSpec = CooldownIntervalSpec(","    eventKey: \"last_action\",","    interval: 3600  \/\/ 1 hour",")","XCTAssertFalse(cooldownSpec.isSatisfiedBy(cooldownContext))  \/\/ 1800 < 3600","","\/\/ Test feature flags","let flagContext = EvaluationContext(","    flags: [\"new_ui\": false]",")","","let flagSpec = FeatureFlagSpec(flagKey: \"new_ui\")","XCTAssertFalse(flagSpec.isSatisfiedBy(flagContext))"],"syntax":"swift"},{"type":"heading","level":2,"text":"Time-Based Evaluations","anchor":"Time-Based-Evaluations"},{"type":"paragraph","inlineContent":[{"text":"Use context timestamps for time-dependent logic:","type":"text"}]},{"type":"codeListing","code":["let context = EvaluationContext(","    currentDate: Date(),","    launchDate: Date().addingTimeInterval(-120)  \/\/ 2 minutes ago",")","","\/\/ Check runtime","if context.timeSinceLaunch > 60 {","    print(\"App running for more than 1 minute\")","}","","\/\/ Use calendar for date logic","let calendar = context.calendar","let hour = calendar.component(.hour, from: context.currentDate)","","if hour >= 22 || hour < 6 {","    print(\"Night time\")","}","","\/\/ Time zone awareness","let timeZone = context.timeZone","print(\"Current timezone: \\(timeZone.identifier)\")"],"syntax":"swift"},{"type":"heading","level":2,"text":"Combining Context Data","anchor":"Combining-Context-Data"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Combine different context types in specifications:"}]},{"type":"codeListing","code":["struct ComplexEligibilitySpec: Specification {","    func isSatisfiedBy(_ context: EvaluationContext) -> Bool {","        \/\/ Check multiple context aspects","        let hasPremium = context.flag(for: \"premium_user\")","        let withinLimit = context.counter(for: \"api_calls\") < 1000","","        guard let lastUse = context.event(for: \"last_api_call\"),","              let timeSince = context.timeSinceEvent(\"last_api_call\") else {","            return false","        }","","        let notOnCooldown = timeSince > 60  \/\/ 1 minute","","        return hasPremium && withinLimit && notOnCooldown","    }","}"],"syntax":"swift"},{"type":"heading","level":2,"text":"Best Practices","anchor":"Best-Practices"},{"type":"heading","level":3,"text":"Use Appropriate Storage Types","anchor":"Use-Appropriate-Storage-Types"},{"type":"codeListing","code":["\/\/ ✅ Good - use the right storage type","let context = EvaluationContext(","    flags: [\"is_enabled\": true],           \/\/ Boolean → flags","    counters: [\"count\": 42],               \/\/ Integer → counters","    events: [\"timestamp\": Date()],         \/\/ Date → events","    userData: [\"object\": customData]       \/\/ Other types → userData",")","","\/\/ ❌ Avoid - misusing storage types","let bad = EvaluationContext(","    userData: [","        \"is_enabled\": true,  \/\/ Should be a flag","        \"count\": 42          \/\/ Should be a counter","    ]",")"],"syntax":"swift"},{"type":"heading","level":3,"text":"Provide Sensible Defaults","anchor":"Provide-Sensible-Defaults"},{"type":"codeListing","code":["\/\/ ✅ Good - handle missing data gracefully","let count = context.counter(for: \"attempts\")  \/\/ Returns 0 if missing","let hasFlag = context.flag(for: \"feature\")    \/\/ Returns false if missing","","\/\/ ❌ Avoid - assuming data exists","let userData = context.userData[\"key\"]!  \/\/ Crashes if missing"],"syntax":"swift"},{"type":"heading","level":3,"text":"Use Builder Pattern for Test Contexts","anchor":"Use-Builder-Pattern-for-Test-Contexts"},{"type":"codeListing","code":["\/\/ ✅ Good - clear test setup","func testPremiumFeatures() {","    let context = EvaluationContext()","        .withFlags([\"premium\": true])","        .withCounters([\"usage\": 5])","","    XCTAssertTrue(premiumSpec.isSatisfiedBy(context))","}","","\/\/ ❌ Verbose - manual construction","func testPremiumFeatures() {","    let context = EvaluationContext(","        currentDate: Date(),","        launchDate: Date(),","        userData: [:],","        counters: [\"usage\": 5],","        events: [:],","        flags: [\"premium\": true],","        segments: []","    )","}"],"syntax":"swift"},{"type":"heading","level":2,"text":"Performance Considerations","anchor":"Performance-Considerations"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"Value Semantics"}],"type":"strong"},{"text":": Context is a struct; copying is efficient via copy-on-write","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"Immutability","type":"text"}]},{"type":"text","text":": Contexts are immutable; modifications create new instances"}]}]},{"content":[{"inlineContent":[{"inlineContent":[{"text":"Safe Defaults","type":"text"}],"type":"strong"},{"text":": Missing data returns safe defaults (0, false, nil) without overhead","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"Dictionary Lookups","type":"text"}],"type":"strong"},{"type":"text","text":": Data access is O(1) but incurs dictionary overhead"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"Builder Methods"}],"type":"strong"},{"type":"text","text":": Each builder method creates a new context; chain wisely"}]}]}]}]}],"metadata":{"modules":[{"name":"SpecificationCore"}],"role":"symbol","symbolKind":"struct","navigatorTitle":[{"kind":"identifier","text":"EvaluationContext"}],"roleHeading":"Structure","externalID":"s:17SpecificationCore17EvaluationContextV","fragments":[{"kind":"keyword","text":"struct"},{"text":" ","kind":"text"},{"kind":"identifier","text":"EvaluationContext"}],"title":"EvaluationContext"},"schemaVersion":{"minor":3,"patch":0,"major":0},"kind":"symbol","topicSections":[{"anchor":"Creating-Contexts","title":"Creating Contexts","identifiers":["doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext\/init(currentDate:launchDate:userData:counters:events:flags:segments:)"]},{"title":"Properties","identifiers":["doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext\/currentDate","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext\/launchDate","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext\/userData","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext\/counters","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext\/events","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext\/flags","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext\/segments"],"anchor":"Properties"},{"title":"Convenience Properties","identifiers":["doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext\/timeSinceLaunch","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext\/calendar","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext\/timeZone"],"anchor":"Convenience-Properties"},{"anchor":"Data-Access","identifiers":["doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext\/counter(for:)","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext\/event(for:)","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext\/flag(for:)","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext\/userData(for:as:)","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext\/timeSinceEvent(_:)"],"title":"Data Access"},{"anchor":"Builder-Methods","identifiers":["doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext\/withUserData(_:)","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext\/withCounters(_:)","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext\/withEvents(_:)","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext\/withFlags(_:)","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext\/withCurrentDate(_:)"],"title":"Builder Methods"},{"anchor":"Related-Types","identifiers":["doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/MockContextProvider","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/ContextProviding"],"title":"Related Types"}],"seeAlsoSections":[{"anchor":"Related-Documentation","identifiers":["doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/MockContextProvider","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/ContextProviding"],"title":"Related Documentation"},{"generated":true,"title":"Context Infrastructure","anchor":"Context-Infrastructure","identifiers":["doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/MockContextProvider"]}],"hierarchy":{"paths":[["doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore"]]},"variants":[{"paths":["\/documentation\/specificationcore\/evaluationcontext"],"traits":[{"interfaceLanguage":"swift"}]}],"references":{"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/EvaluationContext":{"navigatorTitle":[{"text":"EvaluationContext","kind":"identifier"}],"type":"topic","kind":"symbol","url":"\/documentation\/specificationcore\/evaluationcontext","title":"EvaluationContext","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext","abstract":[{"type":"text","text":"A context object that holds data needed for specification evaluation."},{"type":"text","text":" "},{"text":"This serves as a container for all the information that specifications might need","type":"text"},{"type":"text","text":" "},{"type":"text","text":"to make their decisions, such as timestamps, counters, user state, etc."}],"role":"symbol","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"EvaluationContext","kind":"identifier"}]},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/EvaluationContext/init(currentDate:launchDate:userData:counters:events:flags:segments:)":{"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext\/init(currentDate:launchDate:userData:counters:events:flags:segments:)","url":"\/documentation\/specificationcore\/evaluationcontext\/init(currentdate:launchdate:userdata:counters:events:flags:segments:)","abstract":[{"type":"text","text":"Creates a new evaluation context with the specified parameters"}],"kind":"symbol","fragments":[{"text":"init","kind":"identifier"},{"text":"(","kind":"text"},{"text":"currentDate","kind":"externalParam"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:10Foundation4DateV","text":"Date","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"launchDate","kind":"externalParam"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:10Foundation4DateV","text":"Date","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"userData","kind":"externalParam"},{"text":": [","kind":"text"},{"preciseIdentifier":"s:SS","text":"String","kind":"typeIdentifier"},{"text":" : ","kind":"text"},{"text":"Any","kind":"keyword"},{"text":"], ","kind":"text"},{"text":"counters","kind":"externalParam"},{"text":": [","kind":"text"},{"preciseIdentifier":"s:SS","text":"String","kind":"typeIdentifier"},{"text":" : ","kind":"text"},{"preciseIdentifier":"s:Si","text":"Int","kind":"typeIdentifier"},{"text":"], ","kind":"text"},{"text":"events","kind":"externalParam"},{"text":": [","kind":"text"},{"preciseIdentifier":"s:SS","text":"String","kind":"typeIdentifier"},{"text":" : ","kind":"text"},{"preciseIdentifier":"s:10Foundation4DateV","text":"Date","kind":"typeIdentifier"},{"text":"], ","kind":"text"},{"text":"flags","kind":"externalParam"},{"text":": [","kind":"text"},{"preciseIdentifier":"s:SS","text":"String","kind":"typeIdentifier"},{"text":" : ","kind":"text"},{"preciseIdentifier":"s:Sb","text":"Bool","kind":"typeIdentifier"},{"text":"], ","kind":"text"},{"text":"segments","kind":"externalParam"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Set","preciseIdentifier":"s:Sh"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":">)"}],"title":"init(currentDate:launchDate:userData:counters:events:flags:segments:)","type":"topic","role":"symbol"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/ContextProviding":{"role":"symbol","title":"ContextProviding","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/ContextProviding","url":"\/documentation\/specificationcore\/contextproviding","kind":"symbol","navigatorTitle":[{"text":"ContextProviding","kind":"identifier"}],"type":"topic","abstract":[{"type":"text","text":"A protocol for types that can provide context for specification evaluation."},{"type":"text","text":" "},{"type":"text","text":"This enables dependency injection and testing by abstracting context creation."}],"fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"text":"ContextProviding","kind":"identifier"}]},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/DefaultContextProvider":{"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider","kind":"symbol","type":"topic","abstract":[{"text":"A thread-safe context provider that maintains application-wide state for specification evaluation.","type":"text"}],"title":"DefaultContextProvider","navigatorTitle":[{"text":"DefaultContextProvider","kind":"identifier"}],"url":"\/documentation\/specificationcore\/defaultcontextprovider","fragments":[{"kind":"keyword","text":"class"},{"text":" ","kind":"text"},{"text":"DefaultContextProvider","kind":"identifier"}],"role":"symbol"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/MockContextProvider":{"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/MockContextProvider","kind":"symbol","type":"topic","abstract":[{"text":"A mock context provider designed for unit testing.","type":"text"},{"text":" ","type":"text"},{"text":"This provider allows you to set up specific context scenarios","type":"text"},{"text":" ","type":"text"},{"text":"and verify that specifications behave correctly under controlled conditions.","type":"text"}],"title":"MockContextProvider","navigatorTitle":[{"text":"MockContextProvider","kind":"identifier"}],"url":"\/documentation\/specificationcore\/mockcontextprovider","fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"text":"MockContextProvider","kind":"identifier"}],"role":"symbol"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/EvaluationContext/event(for:)":{"type":"topic","kind":"symbol","url":"\/documentation\/specificationcore\/evaluationcontext\/event(for:)","title":"event(for:)","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext\/event(for:)","abstract":[{"text":"Gets an event date for the given key","type":"text"}],"role":"symbol","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"text":"event","kind":"identifier"},{"text":"(","kind":"text"},{"text":"for","kind":"externalParam"},{"kind":"text","text":": "},{"text":"String","preciseIdentifier":"s:SS","kind":"typeIdentifier"},{"kind":"text","text":") -> "},{"text":"Date","preciseIdentifier":"s:10Foundation4DateV","kind":"typeIdentifier"},{"kind":"text","text":"?"}]},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/EvaluationContext/timeZone":{"url":"\/documentation\/specificationcore\/evaluationcontext\/timezone","type":"topic","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext\/timeZone","role":"symbol","title":"timeZone","abstract":[{"type":"text","text":"Current time zone"}],"kind":"symbol","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"text":"timeZone","kind":"identifier"},{"text":": ","kind":"text"},{"text":"TimeZone","kind":"typeIdentifier","preciseIdentifier":"s:10Foundation8TimeZoneV"}]},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/EvaluationContext/currentDate":{"type":"topic","title":"currentDate","url":"\/documentation\/specificationcore\/evaluationcontext\/currentdate","kind":"symbol","abstract":[{"type":"text","text":"The current date and time for time-based evaluations"}],"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext\/currentDate","role":"symbol","fragments":[{"kind":"keyword","text":"let"},{"text":" ","kind":"text"},{"text":"currentDate","kind":"identifier"},{"kind":"text","text":": "},{"text":"Date","kind":"typeIdentifier","preciseIdentifier":"s:10Foundation4DateV"}]},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/EvaluationContext/segments":{"type":"topic","kind":"symbol","url":"\/documentation\/specificationcore\/evaluationcontext\/segments","title":"segments","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext\/segments","abstract":[{"text":"A set of user segments (e.g., “vip”, “beta”, etc.)","type":"text"}],"role":"symbol","fragments":[{"kind":"keyword","text":"let"},{"kind":"text","text":" "},{"kind":"identifier","text":"segments"},{"kind":"text","text":": "},{"kind":"typeIdentifier","preciseIdentifier":"s:Sh","text":"Set"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","preciseIdentifier":"s:SS","text":"String"},{"kind":"text","text":">"}]},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/EvaluationContext/withCounters(_:)":{"type":"topic","kind":"symbol","url":"\/documentation\/specificationcore\/evaluationcontext\/withcounters(_:)","title":"withCounters(_:)","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext\/withCounters(_:)","abstract":[{"text":"Creates a new context with updated counters","type":"text"}],"role":"symbol","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"withCounters"},{"kind":"text","text":"(["},{"kind":"typeIdentifier","preciseIdentifier":"s:SS","text":"String"},{"kind":"text","text":" : "},{"kind":"typeIdentifier","preciseIdentifier":"s:Si","text":"Int"},{"kind":"text","text":"]) -> "},{"kind":"typeIdentifier","preciseIdentifier":"s:17SpecificationCore17EvaluationContextV","text":"EvaluationContext"}]},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/EvaluationContext/timeSinceLaunch":{"fragments":[{"text":"var","kind":"keyword"},{"text":" ","kind":"text"},{"text":"timeSinceLaunch","kind":"identifier"},{"text":": ","kind":"text"},{"preciseIdentifier":"c:@T@NSTimeInterval","text":"TimeInterval","kind":"typeIdentifier"}],"type":"topic","kind":"symbol","abstract":[{"type":"text","text":"Time interval since application launch in seconds"}],"url":"\/documentation\/specificationcore\/evaluationcontext\/timesincelaunch","title":"timeSinceLaunch","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext\/timeSinceLaunch","role":"symbol"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/EvaluationContext/withEvents(_:)":{"url":"\/documentation\/specificationcore\/evaluationcontext\/withevents(_:)","abstract":[{"type":"text","text":"Creates a new context with updated events"}],"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext\/withEvents(_:)","role":"symbol","type":"topic","kind":"symbol","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"withEvents"},{"kind":"text","text":"(["},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":" : "},{"kind":"typeIdentifier","text":"Date","preciseIdentifier":"s:10Foundation4DateV"},{"kind":"text","text":"]) -> "},{"kind":"typeIdentifier","text":"EvaluationContext","preciseIdentifier":"s:17SpecificationCore17EvaluationContextV"}],"title":"withEvents(_:)"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/EvaluationContext/calendar":{"fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"calendar"},{"kind":"text","text":": "},{"kind":"typeIdentifier","preciseIdentifier":"s:10Foundation8CalendarV","text":"Calendar"}],"type":"topic","kind":"symbol","abstract":[{"type":"text","text":"Current calendar components for date-based logic"}],"url":"\/documentation\/specificationcore\/evaluationcontext\/calendar","title":"calendar","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext\/calendar","role":"symbol"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/EvaluationContext/counters":{"type":"topic","title":"counters","url":"\/documentation\/specificationcore\/evaluationcontext\/counters","kind":"symbol","abstract":[{"text":"A dictionary for storing counters and numeric values","type":"text"}],"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext\/counters","role":"symbol","fragments":[{"kind":"keyword","text":"let"},{"kind":"text","text":" "},{"kind":"identifier","text":"counters"},{"kind":"text","text":": ["},{"preciseIdentifier":"s:SS","kind":"typeIdentifier","text":"String"},{"kind":"text","text":" : "},{"preciseIdentifier":"s:Si","kind":"typeIdentifier","text":"Int"},{"kind":"text","text":"]"}]},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/EvaluationContext/flags":{"type":"topic","title":"flags","url":"\/documentation\/specificationcore\/evaluationcontext\/flags","kind":"symbol","abstract":[{"text":"A dictionary for storing boolean flags","type":"text"}],"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext\/flags","role":"symbol","fragments":[{"kind":"keyword","text":"let"},{"text":" ","kind":"text"},{"text":"flags","kind":"identifier"},{"text":": [","kind":"text"},{"text":"String","kind":"typeIdentifier","preciseIdentifier":"s:SS"},{"text":" : ","kind":"text"},{"text":"Bool","kind":"typeIdentifier","preciseIdentifier":"s:Sb"},{"kind":"text","text":"]"}]},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/EvaluationContext/counter(for:)":{"type":"topic","url":"\/documentation\/specificationcore\/evaluationcontext\/counter(for:)","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext\/counter(for:)","role":"symbol","title":"counter(for:)","abstract":[{"type":"text","text":"Gets a counter value for the given key"}],"kind":"symbol","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"counter","kind":"identifier"},{"text":"(","kind":"text"},{"text":"for","kind":"externalParam"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"text":") -> ","kind":"text"},{"kind":"typeIdentifier","text":"Int","preciseIdentifier":"s:Si"}]},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/EvaluationContext/events":{"type":"topic","url":"\/documentation\/specificationcore\/evaluationcontext\/events","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext\/events","role":"symbol","title":"events","abstract":[{"text":"A dictionary for storing date-based events","type":"text"}],"kind":"symbol","fragments":[{"kind":"keyword","text":"let"},{"kind":"text","text":" "},{"kind":"identifier","text":"events"},{"kind":"text","text":": ["},{"kind":"typeIdentifier","preciseIdentifier":"s:SS","text":"String"},{"kind":"text","text":" : "},{"kind":"typeIdentifier","preciseIdentifier":"s:10Foundation4DateV","text":"Date"},{"kind":"text","text":"]"}]},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/EvaluationContext/withFlags(_:)":{"role":"symbol","title":"withFlags(_:)","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext\/withFlags(_:)","kind":"symbol","url":"\/documentation\/specificationcore\/evaluationcontext\/withflags(_:)","type":"topic","abstract":[{"type":"text","text":"Creates a new context with updated flags"}],"fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"withFlags","kind":"identifier"},{"text":"([","kind":"text"},{"text":"String","kind":"typeIdentifier","preciseIdentifier":"s:SS"},{"text":" : ","kind":"text"},{"text":"Bool","kind":"typeIdentifier","preciseIdentifier":"s:Sb"},{"text":"]) -> ","kind":"text"},{"text":"EvaluationContext","kind":"typeIdentifier","preciseIdentifier":"s:17SpecificationCore17EvaluationContextV"}]},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/EvaluationContext/timeSinceEvent(_:)":{"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext\/timeSinceEvent(_:)","kind":"symbol","type":"topic","abstract":[{"text":"Calculates time since an event occurred","type":"text"}],"title":"timeSinceEvent(_:)","url":"\/documentation\/specificationcore\/evaluationcontext\/timesinceevent(_:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"timeSinceEvent"},{"kind":"text","text":"("},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","text":"TimeInterval","preciseIdentifier":"c:@T@NSTimeInterval"},{"kind":"text","text":"?"}],"role":"symbol"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/EvaluationContext/withUserData(_:)":{"role":"symbol","title":"withUserData(_:)","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext\/withUserData(_:)","url":"\/documentation\/specificationcore\/evaluationcontext\/withuserdata(_:)","kind":"symbol","type":"topic","abstract":[{"type":"text","text":"Creates a new context with updated user data"}],"fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"withUserData"},{"kind":"text","text":"(["},{"preciseIdentifier":"s:SS","kind":"typeIdentifier","text":"String"},{"kind":"text","text":" : "},{"kind":"keyword","text":"Any"},{"kind":"text","text":"]) -> "},{"preciseIdentifier":"s:17SpecificationCore17EvaluationContextV","kind":"typeIdentifier","text":"EvaluationContext"}]},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore":{"type":"topic","kind":"symbol","url":"\/documentation\/specificationcore","title":"SpecificationCore","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore","abstract":[{"type":"text","text":"Platform-independent core for building specification-based business logic in Swift."}],"role":"collection"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/EvaluationContext/withCurrentDate(_:)":{"type":"topic","url":"\/documentation\/specificationcore\/evaluationcontext\/withcurrentdate(_:)","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext\/withCurrentDate(_:)","role":"symbol","title":"withCurrentDate(_:)","abstract":[{"type":"text","text":"Creates a new context with an updated current date"}],"kind":"symbol","fragments":[{"text":"func","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"withCurrentDate"},{"kind":"text","text":"("},{"kind":"typeIdentifier","preciseIdentifier":"s:10Foundation4DateV","text":"Date"},{"text":") -> ","kind":"text"},{"text":"EvaluationContext","preciseIdentifier":"s:17SpecificationCore17EvaluationContextV","kind":"typeIdentifier"}]},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/EvaluationContext/userData(for:as:)":{"kind":"symbol","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext\/userData(for:as:)","type":"topic","abstract":[{"text":"Gets user data for the given key","type":"text"}],"title":"userData(for:as:)","url":"\/documentation\/specificationcore\/evaluationcontext\/userdata(for:as:)","fragments":[{"text":"func","kind":"keyword"},{"kind":"text","text":" "},{"text":"userData","kind":"identifier"},{"kind":"text","text":"<"},{"text":"T","kind":"genericParameter"},{"text":">(","kind":"text"},{"kind":"externalParam","text":"for"},{"text":": ","kind":"text"},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":", "},{"kind":"externalParam","text":"as"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:17SpecificationCore17EvaluationContextV8userData3for2asxSgSS_xmtlF1TL_xmfp","text":"T","kind":"typeIdentifier"},{"text":".Type) -> ","kind":"text"},{"preciseIdentifier":"s:17SpecificationCore17EvaluationContextV8userData3for2asxSgSS_xmtlF1TL_xmfp","text":"T","kind":"typeIdentifier"},{"text":"?","kind":"text"}],"role":"symbol"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/EvaluationContext/userData":{"type":"topic","title":"userData","url":"\/documentation\/specificationcore\/evaluationcontext\/userdata","kind":"symbol","abstract":[{"type":"text","text":"A dictionary for storing arbitrary key-value data"}],"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext\/userData","role":"symbol","fragments":[{"kind":"keyword","text":"let"},{"kind":"text","text":" "},{"kind":"identifier","text":"userData"},{"kind":"text","text":": ["},{"kind":"typeIdentifier","preciseIdentifier":"s:SS","text":"String"},{"kind":"text","text":" : "},{"kind":"keyword","text":"Any"},{"kind":"text","text":"]"}]},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/EvaluationContext/launchDate":{"type":"topic","title":"launchDate","url":"\/documentation\/specificationcore\/evaluationcontext\/launchdate","kind":"symbol","abstract":[{"text":"Application launch time for calculating time since launch","type":"text"}],"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext\/launchDate","role":"symbol","fragments":[{"kind":"keyword","text":"let"},{"kind":"text","text":" "},{"kind":"identifier","text":"launchDate"},{"kind":"text","text":": "},{"preciseIdentifier":"s:10Foundation4DateV","kind":"typeIdentifier","text":"Date"}]},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/EvaluationContext/flag(for:)":{"role":"symbol","title":"flag(for:)","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext\/flag(for:)","kind":"symbol","url":"\/documentation\/specificationcore\/evaluationcontext\/flag(for:)","type":"topic","abstract":[{"type":"text","text":"Gets a flag value for the given key"}],"fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"flag"},{"kind":"text","text":"("},{"text":"for","kind":"externalParam"},{"text":": ","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:SS","text":"String"},{"text":") -> ","kind":"text"},{"preciseIdentifier":"s:Sb","kind":"typeIdentifier","text":"Bool"}]}}}