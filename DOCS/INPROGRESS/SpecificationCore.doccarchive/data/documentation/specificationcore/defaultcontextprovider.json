{"primaryContentSections":[{"declarations":[{"languages":["swift"],"platforms":["macOS"],"tokens":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"text":"DefaultContextProvider","kind":"identifier"}]}],"kind":"declarations"},{"kind":"content","content":[{"level":2,"anchor":"overview","type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"code":"DefaultContextProvider","type":"codeVoice"},{"text":" is the primary context provider in SpecificationCore, designed to manage","type":"text"},{"text":" ","type":"text"},{"text":"counters, feature flags, events, and user data that specifications use for evaluation. It provides","type":"text"},{"text":" ","type":"text"},{"text":"a shared singleton instance and supports reactive updates through Combine publishers.","type":"text"}]},{"type":"heading","anchor":"Key-Features","level":2,"text":"Key Features"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"Thread-Safe"}],"type":"strong"},{"text":": All operations are protected by locks for concurrent access","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"Reactive Updates"}],"type":"strong"},{"text":": Publishes changes via Combine when state mutates","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"Flexible Storage"}],"type":"strong"},{"text":": Supports counters, flags, events, and arbitrary user data","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Singleton Pattern"}]},{"text":": Provides a shared instance for application-wide state","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"Async Support"}],"type":"strong"},{"text":": Provides both sync and async context access methods","type":"text"}]}]}]},{"text":"Usage Examples","type":"heading","anchor":"Usage-Examples","level":2},{"text":"Basic Usage with Shared Instance","type":"heading","anchor":"Basic-Usage-with-Shared-Instance","level":3},{"type":"codeListing","syntax":"swift","code":["let provider = DefaultContextProvider.shared","","\/\/ Set up some initial state","provider.setFlag(\"premium_features\", value: true)","provider.setCounter(\"app_launches\", value: 1)","provider.recordEvent(\"first_launch\")","","\/\/ Use with specifications","@Satisfies(using: FeatureFlagSpec(flagKey: \"premium_features\"))","var showPremiumFeatures: Bool"]},{"text":"Counter Management","anchor":"Counter-Management","type":"heading","level":3},{"type":"codeListing","syntax":"swift","code":["let provider = DefaultContextProvider.shared","","\/\/ Track user actions","provider.incrementCounter(\"button_clicks\")","provider.incrementCounter(\"page_views\", by: 1)","","\/\/ Check limits with specifications","@Satisfies(using: MaxCountSpec(counterKey: \"daily_api_calls\", maximumCount: 1000))","var canMakeAPICall: Bool","","if canMakeAPICall {","    makeAPICall()","    provider.incrementCounter(\"daily_api_calls\")","}"]},{"text":"Event Tracking for Cooldowns","anchor":"Event-Tracking-for-Cooldowns","type":"heading","level":3},{"syntax":"swift","code":["\/\/ Record events for time-based specifications","provider.recordEvent(\"last_notification_shown\")","provider.recordEvent(\"user_tutorial_completed\")","","\/\/ Use with time-based specs","@Satisfies(using: CooldownIntervalSpec(eventKey: \"last_notification_shown\", interval: 3600))","var canShowNotification: Bool"],"type":"codeListing"},{"anchor":"Feature-Flag-Management","type":"heading","level":3,"text":"Feature Flag Management"},{"syntax":"swift","code":["\/\/ Configure feature flags","provider.setFlag(\"dark_mode_enabled\", value: true)","provider.setFlag(\"experimental_ui\", value: false)","provider.setFlag(\"analytics_enabled\", value: true)","","\/\/ Use throughout the app","@Satisfies(using: FeatureFlagSpec(flagKey: \"dark_mode_enabled\"))","var shouldUseDarkMode: Bool"],"type":"codeListing"},{"anchor":"User-Data-Storage","type":"heading","level":3,"text":"User Data Storage"},{"syntax":"swift","code":["\/\/ Store user-specific data","provider.setUserData(\"subscription_tier\", value: \"premium\")","provider.setUserData(\"user_segment\", value: UserSegment.beta)","provider.setUserData(\"onboarding_completed\", value: true)","","\/\/ Access in custom specifications","struct CustomUserSpec: Specification {","    typealias T = EvaluationContext","","    func isSatisfiedBy(_ context: EvaluationContext) -> Bool {","        let tier = context.userData[\"subscription_tier\"] as? String","        return tier == \"premium\"","    }","}"],"type":"codeListing"},{"anchor":"Custom-Context-Provider-Instance","type":"heading","level":3,"text":"Custom Context Provider Instance"},{"syntax":"swift","code":["\/\/ Create isolated provider for testing or specific modules","let testProvider = DefaultContextProvider()","testProvider.setFlag(\"test_mode\", value: true)","","@Satisfies(provider: testProvider, using: FeatureFlagSpec(flagKey: \"test_mode\"))","var isInTestMode: Bool"],"type":"codeListing"},{"anchor":"SwiftUI-Integration-with-Updates","type":"heading","level":3,"text":"SwiftUI Integration with Updates"},{"syntax":"swift","code":["struct ContentView: View {","    @ObservedSatisfies(using: MaxCountSpec(counterKey: \"banner_shown\", maximumCount: 3))","    var shouldShowBanner: Bool","","    var body: some View {","        VStack {","            if shouldShowBanner {","                PromoBanner()","                    .onTapGesture {","                        DefaultContextProvider.shared.incrementCounter(\"banner_shown\")","                        \/\/ View automatically updates due to reactive binding","                    }","            }","            MainContent()","        }","    }","}"],"type":"codeListing"},{"anchor":"Thread-Safety","type":"heading","level":2,"text":"Thread Safety"},{"inlineContent":[{"type":"text","text":"All methods are thread-safe and can be called from any queue:"}],"type":"paragraph"},{"syntax":"swift","code":["DispatchQueue.global().async {","    provider.incrementCounter(\"background_task\")","}","","DispatchQueue.main.async {","    provider.setFlag(\"ui_ready\", value: true)","}"],"type":"codeListing"},{"anchor":"State-Management","type":"heading","level":2,"text":"State Management"},{"inlineContent":[{"text":"The provider maintains several types of state:","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"Counters"}],"type":"strong"},{"type":"text","text":": Integer values that can be incremented\/decremented"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"inlineContent":[{"text":"Flags","type":"text"}],"type":"strong"},{"type":"text","text":": Boolean values for feature toggles"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"inlineContent":[{"text":"Events","type":"text"}],"type":"strong"},{"text":": Date timestamps for time-based specifications","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"User Data"}]},{"type":"text","text":": Arbitrary key-value storage for custom data"}]}]},{"content":[{"inlineContent":[{"inlineContent":[{"text":"Context Providers","type":"text"}],"type":"strong"},{"text":": Custom data source factories","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"inlineContent":[{"type":"text","text":"A thread-safe context provider that maintains application-wide state for specification evaluation."}],"type":"paragraph"},{"anchor":"Overview","level":2,"text":"Overview","type":"heading"},{"inlineContent":[{"type":"codeVoice","code":"DefaultContextProvider"},{"text":" is the primary context provider in SpecificationCore, designed to manage counters, feature flags, events, and user data that specifications use for evaluation. It provides a shared singleton instance and supports reactive updates through Combine publishers.","type":"text"}],"type":"paragraph"},{"anchor":"Key-Features","level":3,"text":"Key Features","type":"heading"},{"items":[{"content":[{"inlineContent":[{"inlineContent":[{"text":"Thread-Safe","type":"text"}],"type":"strong"},{"text":": All operations protected by locks for concurrent access","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"Reactive Updates"}],"type":"strong"},{"text":": Publishes changes via Combine when state mutates","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"text":"Flexible Storage","type":"text"}]},{"text":": Supports counters, flags, events, and arbitrary user data","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"inlineContent":[{"text":"Singleton Pattern","type":"text"}],"type":"strong"},{"type":"text","text":": Provides a shared instance for application-wide state"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Async Support"}]},{"text":": Both sync and async context access methods","type":"text"}]}]}],"type":"unorderedList"},{"type":"heading","text":"When to Use DefaultContextProvider","level":3,"anchor":"When-to-Use-DefaultContextProvider"},{"type":"paragraph","inlineContent":[{"text":"Use ","type":"text"},{"type":"codeVoice","code":"DefaultContextProvider"},{"text":" when you need to:","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"Maintain application-wide specification context"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Track counters, events, and feature flags"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Provide dynamic context to specifications at runtime","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Enable reactive specification evaluation in SwiftUI"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Share context state across your application","type":"text"}]}]}]},{"type":"heading","text":"Quick Example","level":2,"anchor":"Quick-Example"},{"code":["import SpecificationCore","","\/\/ Use the shared instance","let provider = DefaultContextProvider.shared","","\/\/ Configure state","provider.setFlag(\"premium_features\", to: true)","provider.setCounter(\"api_calls\", to: 50)","provider.recordEvent(\"last_login\")","","\/\/ Get context for specifications","let context = provider.currentContext()","","\/\/ Use with specifications","@Satisfies(using: FeatureFlagSpec(flagKey: \"premium_features\"))","var showPremiumFeatures: Bool"],"type":"codeListing","syntax":"swift"},{"type":"heading","text":"Shared Singleton","level":2,"anchor":"Shared-Singleton"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Access the application-wide shared instance:"}]},{"code":["\/\/ Shared instance available throughout the app","let provider = DefaultContextProvider.shared","","\/\/ Configure once, use everywhere","provider.setFlag(\"dark_mode\", to: true)","provider.setCounter(\"app_launches\", to: 1)","","\/\/ All specifications use the same shared state","@Satisfies(using: FeatureFlagSpec(flagKey: \"dark_mode\"))","var useDarkMode: Bool  \/\/ Reads from shared instance"],"type":"codeListing","syntax":"swift"},{"text":"Custom Instances","anchor":"Custom-Instances","level":2,"type":"heading"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Create isolated instances for testing or module-specific state:"}]},{"code":["\/\/ Create a separate instance","let testProvider = DefaultContextProvider()","testProvider.setFlag(\"test_mode\", to: true)","","\/\/ Use in specific contexts","class FeatureService {","    let contextProvider: DefaultContextProvider","","    init(contextProvider: DefaultContextProvider = .shared) {","        self.contextProvider = contextProvider","    }","","    func checkFeature() -> Bool {","        let context = contextProvider.currentContext()","        return context.flag(for: \"feature_enabled\")","    }","}","","\/\/ Production uses shared","let prodService = FeatureService()","","\/\/ Tests use isolated instance","let testService = FeatureService(contextProvider: testProvider)"],"syntax":"swift","type":"codeListing"},{"level":2,"anchor":"Counter-Management","type":"heading","text":"Counter Management"},{"inlineContent":[{"text":"Track and manipulate integer counters:","type":"text"}],"type":"paragraph"},{"level":3,"anchor":"Setting-Counters","type":"heading","text":"Setting Counters"},{"syntax":"swift","type":"codeListing","code":["let provider = DefaultContextProvider.shared","","\/\/ Set counter to specific value","provider.setCounter(\"login_attempts\", to: 3)","provider.setCounter(\"api_calls_today\", to: 100)","provider.setCounter(\"items_viewed\", to: 0)"]},{"level":3,"anchor":"Incrementing-Counters","type":"heading","text":"Incrementing Counters"},{"syntax":"swift","type":"codeListing","code":["\/\/ Increment by 1 (default)","provider.incrementCounter(\"page_views\")","","\/\/ Increment by specific amount","provider.incrementCounter(\"api_calls\", by: 10)","","\/\/ Get the new value","let newCount = provider.incrementCounter(\"clicks\", by: 1)","print(\"New click count: \\(newCount)\")"]},{"level":3,"anchor":"Decrementing-Counters","type":"heading","text":"Decrementing Counters"},{"syntax":"swift","type":"codeListing","code":["\/\/ Decrement by 1 (default)","provider.decrementCounter(\"remaining_tries\")","","\/\/ Decrement by specific amount","provider.decrementCounter(\"credits\", by: 5)","","\/\/ Counters never go below zero","provider.setCounter(\"balance\", to: 3)","provider.decrementCounter(\"balance\", by: 10)  \/\/ Result: 0, not -7"]},{"level":3,"anchor":"Reading-and-Resetting","type":"heading","text":"Reading and Resetting"},{"syntax":"swift","type":"codeListing","code":["\/\/ Read current value","let currentCount = provider.getCounter(\"attempts\")  \/\/ Returns 0 if not found","","\/\/ Reset to zero","provider.resetCounter(\"daily_actions\")","","\/\/ Clear all counters","provider.clearCounters()"]},{"level":3,"anchor":"Using-with-Specifications","type":"heading","text":"Using with Specifications"},{"syntax":"swift","type":"codeListing","code":["\/\/ Track API call limits","provider.setCounter(\"api_calls\", to: 50)","","@Satisfies(using: MaxCountSpec(counterKey: \"api_calls\", maximumCount: 100))","var canMakeAPICall: Bool","","if canMakeAPICall {","    makeAPICall()","    provider.incrementCounter(\"api_calls\")","}"]},{"level":2,"anchor":"Feature-Flag-Management","type":"heading","text":"Feature Flag Management"},{"inlineContent":[{"type":"text","text":"Manage boolean feature toggles:"}],"type":"paragraph"},{"level":3,"anchor":"Setting-Flags","type":"heading","text":"Setting Flags"},{"syntax":"swift","type":"codeListing","code":["let provider = DefaultContextProvider.shared","","\/\/ Enable\/disable features","provider.setFlag(\"dark_mode\", to: true)","provider.setFlag(\"experimental_ui\", to: false)","provider.setFlag(\"analytics_enabled\", to: true)"]},{"level":3,"anchor":"Toggling-Flags","type":"heading","text":"Toggling Flags"},{"syntax":"swift","type":"codeListing","code":["\/\/ Toggle between true\/false","let newValue = provider.toggleFlag(\"debug_mode\")","print(\"Debug mode is now: \\(newValue)\")","","\/\/ Toggle returns the new value","provider.setFlag(\"feature_a\", to: false)","provider.toggleFlag(\"feature_a\")  \/\/ Returns true"]},{"level":3,"anchor":"Reading-Flags","type":"heading","text":"Reading Flags"},{"syntax":"swift","type":"codeListing","code":["\/\/ Read current value (false if not found)","let isDarkMode = provider.getFlag(\"dark_mode\")","","\/\/ Clear all flags","provider.clearFlags()"]},{"level":3,"anchor":"Using-with-Specifications","type":"heading","text":"Using with Specifications"},{"syntax":"swift","type":"codeListing","code":["\/\/ Configure feature flags","provider.setFlag(\"premium_features\", to: true)","","@Satisfies(using: FeatureFlagSpec(flagKey: \"premium_features\"))","var showPremiumUI: Bool","","if showPremiumUI {","    \/\/ Render premium interface","}"]},{"level":2,"anchor":"Event-Tracking","type":"heading","text":"Event Tracking"},{"inlineContent":[{"type":"text","text":"Record and retrieve event timestamps:"}],"type":"paragraph"},{"level":3,"anchor":"Recording-Events","type":"heading","text":"Recording Events"},{"syntax":"swift","type":"codeListing","code":["let provider = DefaultContextProvider.shared","","\/\/ Record event with current timestamp","provider.recordEvent(\"user_logged_in\")","provider.recordEvent(\"tutorial_completed\")","provider.recordEvent(\"notification_shown\")","","\/\/ Record event with specific timestamp","let customDate = Date().addingTimeInterval(-3600)  \/\/ 1 hour ago","provider.recordEvent(\"last_purchase\", at: customDate)"]},{"level":3,"anchor":"Reading-Events","type":"heading","text":"Reading Events"},{"syntax":"swift","type":"codeListing","code":["\/\/ Get event timestamp","if let lastLogin = provider.getEvent(\"user_logged_in\") {","    print(\"Last login: \\(lastLogin)\")","}","","\/\/ Remove an event","provider.removeEvent(\"temporary_flag\")","","\/\/ Clear all events","provider.clearEvents()"]},{"level":3,"anchor":"Using-with-Time-Based-Specifications","type":"heading","text":"Using with Time-Based Specifications"},{"syntax":"swift","type":"codeListing","code":["\/\/ Record when notification was shown","provider.recordEvent(\"last_notification\")","","\/\/ Cooldown spec ensures minimum time between notifications","@Satisfies(using: CooldownIntervalSpec(","    eventKey: \"last_notification\",","    interval: 3600  \/\/ 1 hour cooldown","))","var canShowNotification: Bool","","if canShowNotification {","    showNotification()","    provider.recordEvent(\"last_notification\")","}"]},{"level":2,"anchor":"User-Data-Storage","type":"heading","text":"User Data Storage"},{"inlineContent":[{"text":"Store arbitrary typed data:","type":"text"}],"type":"paragraph"},{"type":"heading","level":3,"text":"Setting User Data","anchor":"Setting-User-Data"},{"syntax":"swift","type":"codeListing","code":["let provider = DefaultContextProvider.shared","","\/\/ Store different types","provider.setUserData(\"user_id\", to: \"abc123\")","provider.setUserData(\"subscription_tier\", to: \"premium\")","provider.setUserData(\"onboarding_completed\", to: true)","","\/\/ Store custom objects","struct UserProfile {","    let name: String","    let age: Int","}","","let profile = UserProfile(name: \"Alice\", age: 30)","provider.setUserData(\"user_profile\", to: profile)"]},{"type":"heading","level":3,"text":"Reading User Data","anchor":"Reading-User-Data"},{"syntax":"swift","type":"codeListing","code":["\/\/ Type-safe retrieval","let userId = provider.getUserData(\"user_id\", as: String.self)","let tier = provider.getUserData(\"subscription_tier\", as: String.self)","let profile = provider.getUserData(\"user_profile\", as: UserProfile.self)","","\/\/ Remove user data","provider.removeUserData(\"temporary_data\")","","\/\/ Clear all user data","provider.clearUserData()"]},{"type":"heading","level":3,"text":"Using in Specifications","anchor":"Using-in-Specifications"},{"syntax":"swift","type":"codeListing","code":["provider.setUserData(\"subscription_tier\", to: \"premium\")","","struct TierSpec: Specification {","    func isSatisfiedBy(_ context: EvaluationContext) -> Bool {","        let tier = context.userData(for: \"subscription_tier\", as: String.self)","        return tier == \"premium\"","    }","}"]},{"type":"heading","level":2,"text":"Custom Context Providers","anchor":"Custom-Context-Providers"},{"inlineContent":[{"type":"text","text":"Register dynamic context providers:"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["let provider = DefaultContextProvider.shared","","\/\/ Register a provider for dynamic data","provider.register(contextKey: \"current_user_id\") {","    UserSession.current.userId","}","","provider.register(contextKey: \"is_online\") {","    NetworkMonitor.shared.isConnected","}","","\/\/ Unregister when no longer needed","provider.unregister(contextKey: \"current_user_id\")","","\/\/ Values are fetched fresh each time context is requested","let context = provider.currentContext()","let userId = context.userData(for: \"current_user_id\", as: String.self)"]},{"type":"heading","level":2,"text":"Bulk Operations","anchor":"Bulk-Operations"},{"inlineContent":[{"type":"text","text":"Manage all state at once:"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["let provider = DefaultContextProvider.shared","","\/\/ Clear everything","provider.clearAll()","","\/\/ Clear specific categories","provider.clearCounters()","provider.clearFlags()","provider.clearEvents()","provider.clearUserData()"]},{"type":"heading","level":2,"text":"Thread Safety","anchor":"Thread-Safety"},{"inlineContent":[{"text":"All operations are thread-safe:","type":"text"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["let provider = DefaultContextProvider.shared","","\/\/ Safe to call from any queue","DispatchQueue.global().async {","    provider.incrementCounter(\"background_task\")","}","","DispatchQueue.main.async {","    provider.setFlag(\"ui_ready\", to: true)","}","","\/\/ Concurrent reads and writes are protected","Task.detached {","    provider.recordEvent(\"async_operation\")","}"]},{"type":"heading","level":2,"text":"Reactive Updates with Combine","anchor":"Reactive-Updates-with-Combine"},{"inlineContent":[{"text":"Subscribe to context changes:","type":"text"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["#if canImport(Combine)","import Combine","","let provider = DefaultContextProvider.shared","","\/\/ Subscribe to all context updates","let cancellable = provider.contextUpdates","    .sink {","        print(\"Context was updated\")","        \/\/ Refresh UI or re-evaluate specifications","    }","","\/\/ Provider conforms to ContextUpdatesProviding","\/\/ Updates are published whenever state changes","provider.setFlag(\"feature\", to: true)  \/\/ Triggers update","provider.incrementCounter(\"count\")      \/\/ Triggers update"]},{"type":"heading","level":2,"text":"Async Context Stream","anchor":"Async-Context-Stream"},{"inlineContent":[{"type":"text","text":"Use async\/await with context updates:"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["let provider = DefaultContextProvider.shared","","Task {","    for await _ in provider.contextStream {","        print(\"Context updated\")","        \/\/ Async handling of context changes","    }","}","","\/\/ Updates stream when state changes","provider.recordEvent(\"user_action\")"]},{"type":"heading","level":2,"text":"Creating Specifications","anchor":"Creating-Specifications"},{"inlineContent":[{"text":"Build specifications using the provider:","type":"text"}],"type":"paragraph"},{"type":"heading","level":3,"text":"Context-Aware Predicates","anchor":"Context-Aware-Predicates"},{"syntax":"swift","type":"codeListing","code":["let provider = DefaultContextProvider.shared","","let spec = provider.contextualPredicate { context, user in","    context.flag(for: \"premium_enabled\") &&","    user.subscriptionTier == \"premium\"","}","","\/\/ Use the specification","let isEligible = spec.isSatisfiedBy(user)"]},{"type":"heading","level":3,"text":"Dynamic Specifications","anchor":"Dynamic-Specifications"},{"syntax":"swift","type":"codeListing","code":["let provider = DefaultContextProvider.shared","","let dynamicSpec = provider.specification { context in","    if context.flag(for: \"use_new_rules\") {","        return AnySpecification(NewEligibilityRules())","    } else {","        return AnySpecification(LegacyEligibilityRules())","    }","}"]},{"type":"heading","level":2,"text":"Testing with DefaultContextProvider","anchor":"Testing-with-DefaultContextProvider"},{"inlineContent":[{"text":"Use separate instances for isolated testing:","type":"text"}],"type":"paragraph"},{"syntax":"swift","code":["class FeatureTests: XCTestCase {","    var provider: DefaultContextProvider!","","    override func setUp() {","        super.setUp()","        provider = DefaultContextProvider()  \/\/ Fresh instance","    }","","    override func tearDown() {","        provider.clearAll()","        super.tearDown()","    }","","    func testFeatureEligibility() {","        \/\/ Configure test scenario","        provider.setFlag(\"premium\", to: true)","        provider.setCounter(\"usage\", to: 5)","","        let context = provider.currentContext()","","        \/\/ Test specification","        XCTAssertTrue(eligibilitySpec.isSatisfiedBy(context))","    }","}"],"type":"codeListing"},{"text":"Real-World Examples","anchor":"Real-World-Examples","type":"heading","level":2},{"text":"API Rate Limiting","anchor":"API-Rate-Limiting","type":"heading","level":3},{"type":"codeListing","code":["let provider = DefaultContextProvider.shared","","\/\/ Track API calls","provider.setCounter(\"api_calls_today\", to: 0)","","@Satisfies(using: MaxCountSpec(","    counterKey: \"api_calls_today\",","    maximumCount: 1000","))","var canMakeAPICall: Bool","","func makeAPIRequest() async throws -> Response {","    guard canMakeAPICall else {","        throw APIError.rateLimitExceeded","    }","","    let response = try await performRequest()","    provider.incrementCounter(\"api_calls_today\")","    return response","}","","\/\/ Reset daily limit","func resetDailyLimits() {","    provider.resetCounter(\"api_calls_today\")","}"],"syntax":"swift"},{"text":"Notification Cooldowns","anchor":"Notification-Cooldowns","type":"heading","level":3},{"type":"codeListing","code":["let provider = DefaultContextProvider.shared","","@Satisfies(using: CooldownIntervalSpec(","    eventKey: \"last_notification\",","    interval: 3600  \/\/ 1 hour","))","var canShowNotification: Bool","","func showImportantNotification() {","    guard canShowNotification else {","        print(\"Too soon since last notification\")","        return","    }","","    displayNotification()","    provider.recordEvent(\"last_notification\")","}"],"syntax":"swift"},{"text":"Feature Rollout","anchor":"Feature-Rollout","type":"heading","level":3},{"type":"codeListing","code":["let provider = DefaultContextProvider.shared","","\/\/ Configure feature flags based on user segment","func configureFeatureFlags(for user: User) {","    if user.isBetaTester {","        provider.setFlag(\"new_ui\", to: true)","        provider.setFlag(\"experimental_features\", to: true)","    } else {","        provider.setFlag(\"new_ui\", to: false)","        provider.setFlag(\"experimental_features\", to: false)","    }","}","","\/\/ Use throughout the app","@Satisfies(using: FeatureFlagSpec(flagKey: \"new_ui\"))","var useNewUI: Bool"],"syntax":"swift"},{"text":"Best Practices","anchor":"Best-Practices","type":"heading","level":2},{"text":"Use Shared Instance for Application State","anchor":"Use-Shared-Instance-for-Application-State","type":"heading","level":3},{"type":"codeListing","code":["\/\/ ✅ Good - shared state across app","let provider = DefaultContextProvider.shared","provider.setFlag(\"dark_mode\", to: true)","","\/\/ ❌ Avoid - creating multiple instances fragments state","let provider1 = DefaultContextProvider()","let provider2 = DefaultContextProvider()  \/\/ Different state!"],"syntax":"swift"},{"text":"Inject Provider for Testability","anchor":"Inject-Provider-for-Testability","type":"heading","level":3},{"type":"codeListing","code":["\/\/ ✅ Good - dependency injection","class FeatureService {","    let provider: DefaultContextProvider","","    init(provider: DefaultContextProvider = .shared) {","        self.provider = provider","    }","}","","\/\/ Easy to test","let testService = FeatureService(provider: DefaultContextProvider())","","\/\/ ❌ Avoid - hard-coded dependency","class FeatureService {","    func check() {","        let context = DefaultContextProvider.shared.currentContext()  \/\/ Hard to test","    }","}"],"syntax":"swift"},{"text":"Clear Test State","anchor":"Clear-Test-State","type":"heading","level":3},{"type":"codeListing","code":["\/\/ ✅ Good - clean slate for each test","override func setUp() {","    provider = DefaultContextProvider()","}","","override func tearDown() {","    provider.clearAll()","}","","\/\/ ❌ Avoid - state leaks between tests","func testA() {","    provider.setFlag(\"test\", to: true)  \/\/ Not cleared","}","","func testB() {","    \/\/ Might fail if testA ran first","}"],"syntax":"swift"},{"text":"Performance Considerations","anchor":"Performance-Considerations","type":"heading","level":2},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"Thread Safety Overhead"}],"type":"strong"},{"text":": Locks add minimal overhead; optimized for concurrent access","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"inlineContent":[{"text":"Reactive Updates","type":"text"}],"type":"strong"},{"text":": Combine publishers add memory overhead; only subscribe when needed","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"Context Creation","type":"text"}],"type":"strong"},{"type":"text","text":": "},{"type":"codeVoice","code":"currentContext()"},{"type":"text","text":" creates a new struct each time; cheap operation"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Dictionary Storage"}]},{"type":"text","text":": O(1) lookups but with dictionary overhead"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"Bulk Clears","type":"text"}],"type":"strong"},{"type":"text","text":": More efficient than removing items one by one"}]}]}]}]}],"kind":"symbol","topicSections":[{"identifiers":["doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/shared"],"anchor":"Shared-Instance","title":"Shared Instance"},{"anchor":"Creating-Providers","identifiers":["doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/init(launchDate:)"],"title":"Creating Providers"},{"title":"Counter Management","identifiers":["doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/setCounter(_:to:)","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/incrementCounter(_:by:)","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/decrementCounter(_:by:)","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/getCounter(_:)","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/resetCounter(_:)"],"anchor":"Counter-Management"},{"anchor":"Flag-Management","title":"Flag Management","identifiers":["doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/setFlag(_:to:)","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/toggleFlag(_:)","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/getFlag(_:)"]},{"title":"Event Management","anchor":"Event-Management","identifiers":["doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/recordEvent(_:)","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/recordEvent(_:at:)","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/getEvent(_:)","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/removeEvent(_:)"]},{"anchor":"User-Data-Management","identifiers":["doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/setUserData(_:to:)","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/getUserData(_:as:)","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/removeUserData(_:)"],"title":"User Data Management"},{"anchor":"Bulk-Operations","identifiers":["doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/clearAll()","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/clearCounters()","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/clearFlags()","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/clearEvents()","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/clearUserData()"],"title":"Bulk Operations"},{"anchor":"Context-Registration","identifiers":["doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/register(contextKey:provider:)","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/unregister(contextKey:)"],"title":"Context Registration"},{"title":"Creating Specifications","identifiers":["doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/specification(_:)","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/contextualPredicate(_:)"],"anchor":"Creating-Specifications"},{"title":"Context Provider Protocol","identifiers":["doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/currentContext()"],"anchor":"Context-Provider-Protocol"},{"title":"Reactive Updates","identifiers":["doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/objectWillChange","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/contextUpdates","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/contextStream"],"anchor":"Reactive-Updates"},{"title":"Default Implementations","identifiers":["doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/ContextProviding-Implementations","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/ContextUpdatesProviding-Implementations"],"anchor":"Default-Implementations","generated":true}],"seeAlsoSections":[{"anchor":"Related-Documentation","title":"Related Documentation","identifiers":["doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/MockContextProvider","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/ContextProviding"]},{"title":"Context Infrastructure","identifiers":["doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/MockContextProvider"],"anchor":"Context-Infrastructure","generated":true}],"abstract":[{"type":"text","text":"A thread-safe context provider that maintains application-wide state for specification evaluation."}],"identifier":{"url":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider","interfaceLanguage":"swift"},"metadata":{"navigatorTitle":[{"kind":"identifier","text":"DefaultContextProvider"}],"roleHeading":"Class","title":"DefaultContextProvider","modules":[{"name":"SpecificationCore"}],"externalID":"s:17SpecificationCore22DefaultContextProviderC","role":"symbol","fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"text":"DefaultContextProvider","kind":"identifier"}],"symbolKind":"class"},"sections":[],"variants":[{"paths":["\/documentation\/specificationcore\/defaultcontextprovider"],"traits":[{"interfaceLanguage":"swift"}]}],"hierarchy":{"paths":[["doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore"]]},"relationshipsSections":[{"identifiers":["doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/ContextProviding","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/ContextUpdatesProviding","doc:\/\/specificationcore.SpecificationCore\/s8CopyableP"],"type":"conformsTo","title":"Conforms To","kind":"relationships"}],"schemaVersion":{"major":0,"minor":3,"patch":0},"references":{"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/DefaultContextProvider/clearCounters()":{"url":"\/documentation\/specificationcore\/defaultcontextprovider\/clearcounters()","type":"topic","abstract":[{"text":"Clears all counters","type":"text"}],"title":"clearCounters()","kind":"symbol","role":"symbol","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"clearCounters"},{"kind":"text","text":"()"}],"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/clearCounters()"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/DefaultContextProvider/getEvent(_:)":{"fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"getEvent"},{"kind":"text","text":"("},{"kind":"typeIdentifier","preciseIdentifier":"s:SS","text":"String"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","preciseIdentifier":"s:10Foundation4DateV","text":"Date"},{"kind":"text","text":"?"}],"type":"topic","kind":"symbol","abstract":[{"type":"text","text":"Gets the timestamp of an event"}],"url":"\/documentation\/specificationcore\/defaultcontextprovider\/getevent(_:)","title":"getEvent(_:)","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/getEvent(_:)","role":"symbol"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/DefaultContextProvider/getFlag(_:)":{"kind":"symbol","title":"getFlag(_:)","type":"topic","abstract":[{"type":"text","text":"Gets the value of a boolean flag"}],"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/getFlag(_:)","role":"symbol","url":"\/documentation\/specificationcore\/defaultcontextprovider\/getflag(_:)","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"getFlag","kind":"identifier"},{"kind":"text","text":"("},{"preciseIdentifier":"s:SS","kind":"typeIdentifier","text":"String"},{"kind":"text","text":") -> "},{"preciseIdentifier":"s:Sb","kind":"typeIdentifier","text":"Bool"}]},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/DefaultContextProvider/register(contextKey:provider:)":{"type":"topic","url":"\/documentation\/specificationcore\/defaultcontextprovider\/register(contextkey:provider:)","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/register(contextKey:provider:)","role":"symbol","title":"register(contextKey:provider:)","abstract":[{"text":"Registers a custom context provider for a specific key","type":"text"}],"kind":"symbol","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"register","kind":"identifier"},{"text":"(","kind":"text"},{"text":"contextKey","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"String","kind":"typeIdentifier","preciseIdentifier":"s:SS"},{"text":", ","kind":"text"},{"text":"provider","kind":"externalParam"},{"text":": () -> ","kind":"text"},{"text":"some","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Any","kind":"keyword"},{"text":")","kind":"text"}]},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/DefaultContextProvider/toggleFlag(_:)":{"type":"topic","kind":"symbol","url":"\/documentation\/specificationcore\/defaultcontextprovider\/toggleflag(_:)","title":"toggleFlag(_:)","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/toggleFlag(_:)","abstract":[{"text":"Toggles a boolean flag","type":"text"}],"role":"symbol","fragments":[{"text":"func","kind":"keyword"},{"kind":"text","text":" "},{"text":"toggleFlag","kind":"identifier"},{"text":"(","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:SS","text":"String"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","preciseIdentifier":"s:Sb","text":"Bool"}]},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/DefaultContextProvider/resetCounter(_:)":{"url":"\/documentation\/specificationcore\/defaultcontextprovider\/resetcounter(_:)","abstract":[{"text":"Resets a counter to zero","type":"text"}],"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/resetCounter(_:)","role":"symbol","type":"topic","kind":"symbol","fragments":[{"kind":"keyword","text":"func"},{"text":" ","kind":"text"},{"kind":"identifier","text":"resetCounter"},{"text":"(","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:SS","text":"String"},{"text":")","kind":"text"}],"title":"resetCounter(_:)"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/ContextProviding":{"role":"symbol","title":"ContextProviding","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/ContextProviding","url":"\/documentation\/specificationcore\/contextproviding","kind":"symbol","navigatorTitle":[{"text":"ContextProviding","kind":"identifier"}],"type":"topic","abstract":[{"type":"text","text":"A protocol for types that can provide context for specification evaluation."},{"type":"text","text":" "},{"type":"text","text":"This enables dependency injection and testing by abstracting context creation."}],"fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"text":"ContextProviding","kind":"identifier"}]},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/DefaultContextProvider/getCounter(_:)":{"url":"\/documentation\/specificationcore\/defaultcontextprovider\/getcounter(_:)","abstract":[{"text":"Gets the current value of a counter","type":"text"}],"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/getCounter(_:)","role":"symbol","type":"topic","kind":"symbol","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"getCounter","kind":"identifier"},{"text":"(","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:SS","text":"String"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","preciseIdentifier":"s:Si","text":"Int"}],"title":"getCounter(_:)"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/DefaultContextProvider/clearFlags()":{"url":"\/documentation\/specificationcore\/defaultcontextprovider\/clearflags()","abstract":[{"text":"Clears all flags","type":"text"}],"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/clearFlags()","role":"symbol","type":"topic","kind":"symbol","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"clearFlags","kind":"identifier"},{"text":"()","kind":"text"}],"title":"clearFlags()"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore":{"type":"topic","kind":"symbol","url":"\/documentation\/specificationcore","title":"SpecificationCore","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore","abstract":[{"type":"text","text":"Platform-independent core for building specification-based business logic in Swift."}],"role":"collection"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/DefaultContextProvider/shared":{"url":"\/documentation\/specificationcore\/defaultcontextprovider\/shared","type":"topic","title":"shared","kind":"symbol","abstract":[{"type":"text","text":"Shared singleton instance for convenient access across the application"}],"role":"symbol","fragments":[{"text":"static","kind":"keyword"},{"text":" ","kind":"text"},{"text":"let","kind":"keyword"},{"text":" ","kind":"text"},{"text":"shared","kind":"identifier"},{"text":": ","kind":"text"},{"text":"DefaultContextProvider","kind":"typeIdentifier","preciseIdentifier":"s:17SpecificationCore22DefaultContextProviderC"}],"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/shared"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/DefaultContextProvider/clearUserData()":{"type":"topic","url":"\/documentation\/specificationcore\/defaultcontextprovider\/clearuserdata()","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/clearUserData()","role":"symbol","title":"clearUserData()","abstract":[{"text":"Clears all user data","type":"text"}],"kind":"symbol","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"clearUserData","kind":"identifier"},{"text":"()","kind":"text"}]},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/DefaultContextProvider/currentContext()":{"fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"currentContext"},{"kind":"text","text":"() -> "},{"kind":"typeIdentifier","text":"EvaluationContext","preciseIdentifier":"s:17SpecificationCore17EvaluationContextV"}],"type":"topic","kind":"symbol","abstract":[{"type":"text","text":"Creates and returns the current context for specification evaluation"}],"url":"\/documentation\/specificationcore\/defaultcontextprovider\/currentcontext()","title":"currentContext()","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/currentContext()","role":"symbol"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/ContextUpdatesProviding":{"fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"text":"ContextUpdatesProviding","kind":"identifier"}],"type":"topic","kind":"symbol","abstract":[{"text":"A provider that can emit update signals when its context may have changed.","type":"text"}],"url":"\/documentation\/specificationcore\/contextupdatesproviding","title":"ContextUpdatesProviding","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/ContextUpdatesProviding","role":"symbol","navigatorTitle":[{"text":"ContextUpdatesProviding","kind":"identifier"}]},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/DefaultContextProvider":{"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider","kind":"symbol","type":"topic","abstract":[{"text":"A thread-safe context provider that maintains application-wide state for specification evaluation.","type":"text"}],"title":"DefaultContextProvider","navigatorTitle":[{"text":"DefaultContextProvider","kind":"identifier"}],"url":"\/documentation\/specificationcore\/defaultcontextprovider","fragments":[{"kind":"keyword","text":"class"},{"text":" ","kind":"text"},{"text":"DefaultContextProvider","kind":"identifier"}],"role":"symbol"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/DefaultContextProvider/specification(_:)":{"url":"\/documentation\/specificationcore\/defaultcontextprovider\/specification(_:)","type":"topic","title":"specification(_:)","abstract":[{"text":"Creates a specification that uses this provider’s context","type":"text"}],"kind":"symbol","role":"symbol","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"specification"},{"kind":"text","text":"<"},{"kind":"genericParameter","text":"T"},{"kind":"text","text":">(("},{"kind":"typeIdentifier","preciseIdentifier":"s:17SpecificationCore17EvaluationContextV","text":"EvaluationContext"},{"kind":"text","text":") -> ("},{"kind":"typeIdentifier","preciseIdentifier":"s:17SpecificationCore22DefaultContextProviderC13specificationyAA03AnyA0VyxGSbxcAA010EvaluationD0VclF1TL_xmfp","text":"T"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","preciseIdentifier":"s:Sb","text":"Bool"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","preciseIdentifier":"s:17SpecificationCore03AnyA0V","text":"AnySpecification"},{"kind":"text","text":"<"},{"preciseIdentifier":"s:17SpecificationCore22DefaultContextProviderC13specificationyAA03AnyA0VyxGSbxcAA010EvaluationD0VclF1TL_xmfp","text":"T","kind":"typeIdentifier"},{"text":">","kind":"text"}],"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/specification(_:)"},"doc://specificationcore.SpecificationCore/s8CopyableP":{"identifier":"doc:\/\/specificationcore.SpecificationCore\/s8CopyableP","title":"Swift.Copyable","type":"unresolvable"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/DefaultContextProvider/ContextUpdatesProviding-Implementations":{"type":"topic","kind":"article","abstract":[],"url":"\/documentation\/specificationcore\/defaultcontextprovider\/contextupdatesproviding-implementations","title":"ContextUpdatesProviding Implementations","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/ContextUpdatesProviding-Implementations","role":"collectionGroup"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/DefaultContextProvider/setCounter(_:to:)":{"url":"\/documentation\/specificationcore\/defaultcontextprovider\/setcounter(_:to:)","abstract":[{"type":"text","text":"Sets a counter value"}],"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/setCounter(_:to:)","role":"symbol","type":"topic","kind":"symbol","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"setCounter","kind":"identifier"},{"text":"(","kind":"text"},{"text":"String","kind":"typeIdentifier","preciseIdentifier":"s:SS"},{"text":", ","kind":"text"},{"text":"to","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"Int","preciseIdentifier":"s:Si","kind":"typeIdentifier"},{"kind":"text","text":")"}],"title":"setCounter(_:to:)"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/DefaultContextProvider/contextStream":{"fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"contextStream"},{"kind":"text","text":": "},{"kind":"typeIdentifier","preciseIdentifier":"s:ScS","text":"AsyncStream"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","preciseIdentifier":"s:s4Voida","text":"Void"},{"kind":"text","text":">"}],"type":"topic","kind":"symbol","abstract":[{"text":"Async bridge of updates; yields whenever ","type":"text"},{"type":"codeVoice","code":"objectWillChange"},{"text":" fires.","type":"text"}],"url":"\/documentation\/specificationcore\/defaultcontextprovider\/contextstream","title":"contextStream","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/contextStream","role":"symbol"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/DefaultContextProvider/objectWillChange":{"type":"topic","kind":"symbol","url":"\/documentation\/specificationcore\/defaultcontextprovider\/objectwillchange","title":"objectWillChange","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/objectWillChange","abstract":[],"role":"symbol","fragments":[{"text":"let","kind":"keyword"},{"text":" ","kind":"text"},{"text":"objectWillChange","kind":"identifier"},{"text":": ","kind":"text"},{"text":"PassthroughSubject","kind":"typeIdentifier","preciseIdentifier":"s:7Combine18PassthroughSubjectC"},{"text":"<","kind":"text"},{"text":"Void","kind":"typeIdentifier","preciseIdentifier":"s:s4Voida"},{"text":", ","kind":"text"},{"text":"Never","kind":"typeIdentifier","preciseIdentifier":"s:s5NeverO"},{"text":">","kind":"text"}]},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/DefaultContextProvider/decrementCounter(_:by:)":{"role":"symbol","kind":"symbol","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"decrementCounter","kind":"identifier"},{"text":"(","kind":"text"},{"text":"String","kind":"typeIdentifier","preciseIdentifier":"s:SS"},{"text":", ","kind":"text"},{"text":"by","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"Int","kind":"typeIdentifier","preciseIdentifier":"s:Si"},{"text":") -> ","kind":"text"},{"text":"Int","kind":"typeIdentifier","preciseIdentifier":"s:Si"}],"abstract":[{"text":"Decrements a counter by the specified amount","type":"text"}],"type":"topic","url":"\/documentation\/specificationcore\/defaultcontextprovider\/decrementcounter(_:by:)","title":"decrementCounter(_:by:)","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/decrementCounter(_:by:)"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/DefaultContextProvider/setFlag(_:to:)":{"type":"topic","url":"\/documentation\/specificationcore\/defaultcontextprovider\/setflag(_:to:)","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/setFlag(_:to:)","role":"symbol","title":"setFlag(_:to:)","abstract":[{"type":"text","text":"Sets a boolean flag"}],"kind":"symbol","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"setFlag","kind":"identifier"},{"text":"(","kind":"text"},{"text":"String","kind":"typeIdentifier","preciseIdentifier":"s:SS"},{"text":", ","kind":"text"},{"text":"to","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"Bool","kind":"typeIdentifier","preciseIdentifier":"s:Sb"},{"text":")","kind":"text"}]},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/DefaultContextProvider/setUserData(_:to:)":{"type":"topic","abstract":[{"type":"text","text":"Sets user data for a key"}],"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/setUserData(_:to:)","title":"setUserData(_:to:)","kind":"symbol","url":"\/documentation\/specificationcore\/defaultcontextprovider\/setuserdata(_:to:)","fragments":[{"text":"func","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"setUserData"},{"text":"(","kind":"text"},{"text":"String","preciseIdentifier":"s:SS","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"to","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"some","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Any","kind":"keyword"},{"kind":"text","text":")"}],"role":"symbol"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/EvaluationContext":{"navigatorTitle":[{"text":"EvaluationContext","kind":"identifier"}],"type":"topic","kind":"symbol","url":"\/documentation\/specificationcore\/evaluationcontext","title":"EvaluationContext","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext","abstract":[{"type":"text","text":"A context object that holds data needed for specification evaluation."},{"type":"text","text":" "},{"text":"This serves as a container for all the information that specifications might need","type":"text"},{"type":"text","text":" "},{"type":"text","text":"to make their decisions, such as timestamps, counters, user state, etc."}],"role":"symbol","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"EvaluationContext","kind":"identifier"}]},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/MockContextProvider":{"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/MockContextProvider","kind":"symbol","type":"topic","abstract":[{"text":"A mock context provider designed for unit testing.","type":"text"},{"text":" ","type":"text"},{"text":"This provider allows you to set up specific context scenarios","type":"text"},{"text":" ","type":"text"},{"text":"and verify that specifications behave correctly under controlled conditions.","type":"text"}],"title":"MockContextProvider","navigatorTitle":[{"text":"MockContextProvider","kind":"identifier"}],"url":"\/documentation\/specificationcore\/mockcontextprovider","fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"text":"MockContextProvider","kind":"identifier"}],"role":"symbol"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/DefaultContextProvider/clearAll()":{"url":"\/documentation\/specificationcore\/defaultcontextprovider\/clearall()","abstract":[{"text":"Clears all stored data","type":"text"}],"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/clearAll()","role":"symbol","type":"topic","kind":"symbol","fragments":[{"kind":"keyword","text":"func"},{"text":" ","kind":"text"},{"text":"clearAll","kind":"identifier"},{"text":"()","kind":"text"}],"title":"clearAll()"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/DefaultContextProvider/removeEvent(_:)":{"type":"topic","kind":"symbol","url":"\/documentation\/specificationcore\/defaultcontextprovider\/removeevent(_:)","title":"removeEvent(_:)","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/removeEvent(_:)","abstract":[{"text":"Removes an event record","type":"text"}],"role":"symbol","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"removeEvent"},{"kind":"text","text":"("},{"kind":"typeIdentifier","preciseIdentifier":"s:SS","text":"String"},{"kind":"text","text":")"}]},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/DefaultContextProvider/contextualPredicate(_:)":{"fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"contextualPredicate","kind":"identifier"},{"text":"<","kind":"text"},{"text":"T","kind":"genericParameter"},{"text":">((","kind":"text"},{"text":"EvaluationContext","preciseIdentifier":"s:17SpecificationCore17EvaluationContextV","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"T","preciseIdentifier":"s:17SpecificationCore22DefaultContextProviderC19contextualPredicateyAA03AnyA0VyxGSbAA010EvaluationD0V_xtclF1TL_xmfp","kind":"typeIdentifier"},{"text":") -> ","kind":"text"},{"text":"Bool","preciseIdentifier":"s:Sb","kind":"typeIdentifier"},{"text":") -> ","kind":"text"},{"text":"AnySpecification","preciseIdentifier":"s:17SpecificationCore03AnyA0V","kind":"typeIdentifier"},{"text":"<","kind":"text"},{"text":"T","preciseIdentifier":"s:17SpecificationCore22DefaultContextProviderC19contextualPredicateyAA03AnyA0VyxGSbAA010EvaluationD0V_xtclF1TL_xmfp","kind":"typeIdentifier"},{"text":">","kind":"text"}],"type":"topic","kind":"symbol","abstract":[{"text":"Creates a context-aware predicate specification","type":"text"}],"url":"\/documentation\/specificationcore\/defaultcontextprovider\/contextualpredicate(_:)","title":"contextualPredicate(_:)","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/contextualPredicate(_:)","role":"symbol"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/DefaultContextProvider/removeUserData(_:)":{"role":"symbol","title":"removeUserData(_:)","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/removeUserData(_:)","url":"\/documentation\/specificationcore\/defaultcontextprovider\/removeuserdata(_:)","kind":"symbol","type":"topic","abstract":[{"type":"text","text":"Removes user data for a key"}],"fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"removeUserData"},{"kind":"text","text":"("},{"text":"String","kind":"typeIdentifier","preciseIdentifier":"s:SS"},{"kind":"text","text":")"}]},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/DefaultContextProvider/recordEvent(_:at:)":{"kind":"symbol","title":"recordEvent(_:at:)","type":"topic","abstract":[{"type":"text","text":"Records an event with a specific timestamp"}],"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/recordEvent(_:at:)","role":"symbol","url":"\/documentation\/specificationcore\/defaultcontextprovider\/recordevent(_:at:)","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"recordEvent","kind":"identifier"},{"text":"(","kind":"text"},{"preciseIdentifier":"s:SS","text":"String","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"at","kind":"externalParam"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:10Foundation4DateV","text":"Date","kind":"typeIdentifier"},{"text":")","kind":"text"}]},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/DefaultContextProvider/getUserData(_:as:)":{"url":"\/documentation\/specificationcore\/defaultcontextprovider\/getuserdata(_:as:)","type":"topic","abstract":[{"type":"text","text":"Gets user data for a key"}],"kind":"symbol","title":"getUserData(_:as:)","role":"symbol","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"getUserData","kind":"identifier"},{"text":"<","kind":"text"},{"text":"T","kind":"genericParameter"},{"text":">(","kind":"text"},{"text":"String","kind":"typeIdentifier","preciseIdentifier":"s:SS"},{"text":", ","kind":"text"},{"text":"as","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"T","kind":"typeIdentifier","preciseIdentifier":"s:17SpecificationCore22DefaultContextProviderC11getUserData_2asxSgSS_xmtlF1TL_xmfp"},{"text":".Type) -> ","kind":"text"},{"text":"T","kind":"typeIdentifier","preciseIdentifier":"s:17SpecificationCore22DefaultContextProviderC11getUserData_2asxSgSS_xmtlF1TL_xmfp"},{"text":"?","kind":"text"}],"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/getUserData(_:as:)"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/DefaultContextProvider/clearEvents()":{"abstract":[{"text":"Clears all events","type":"text"}],"type":"topic","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"clearEvents"},{"kind":"text","text":"()"}],"title":"clearEvents()","kind":"symbol","url":"\/documentation\/specificationcore\/defaultcontextprovider\/clearevents()","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/clearEvents()","role":"symbol"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/DefaultContextProvider/unregister(contextKey:)":{"url":"\/documentation\/specificationcore\/defaultcontextprovider\/unregister(contextkey:)","type":"topic","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/unregister(contextKey:)","role":"symbol","title":"unregister(contextKey:)","abstract":[{"type":"text","text":"Unregisters a custom context provider"}],"kind":"symbol","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"unregister"},{"kind":"text","text":"("},{"kind":"externalParam","text":"contextKey"},{"kind":"text","text":": "},{"kind":"typeIdentifier","preciseIdentifier":"s:SS","text":"String"},{"kind":"text","text":")"}]},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/DefaultContextProvider/init(launchDate:)":{"title":"init(launchDate:)","kind":"symbol","type":"topic","abstract":[{"text":"Creates a new default context provider","type":"text"}],"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/init(launchDate:)","role":"symbol","url":"\/documentation\/specificationcore\/defaultcontextprovider\/init(launchdate:)","fragments":[{"text":"init","kind":"identifier"},{"text":"(","kind":"text"},{"text":"launchDate","kind":"externalParam"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:10Foundation4DateV","text":"Date","kind":"typeIdentifier"},{"text":")","kind":"text"}]},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/DefaultContextProvider/recordEvent(_:)":{"type":"topic","url":"\/documentation\/specificationcore\/defaultcontextprovider\/recordevent(_:)","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/recordEvent(_:)","role":"symbol","title":"recordEvent(_:)","abstract":[{"type":"text","text":"Records an event with the current timestamp"}],"kind":"symbol","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"recordEvent"},{"kind":"text","text":"("},{"preciseIdentifier":"s:SS","kind":"typeIdentifier","text":"String"},{"kind":"text","text":")"}]},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/DefaultContextProvider/contextUpdates":{"title":"contextUpdates","kind":"symbol","type":"topic","abstract":[{"text":"Emits a signal when internal state changes.","type":"text"}],"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/contextUpdates","role":"symbol","url":"\/documentation\/specificationcore\/defaultcontextprovider\/contextupdates","fragments":[{"text":"var","kind":"keyword"},{"text":" ","kind":"text"},{"text":"contextUpdates","kind":"identifier"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:7Combine12AnyPublisherV","text":"AnyPublisher","kind":"typeIdentifier"},{"text":"<","kind":"text"},{"preciseIdentifier":"s:s4Voida","text":"Void","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"preciseIdentifier":"s:s5NeverO","text":"Never","kind":"typeIdentifier"},{"text":">","kind":"text"}]},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/DefaultContextProvider/incrementCounter(_:by:)":{"url":"\/documentation\/specificationcore\/defaultcontextprovider\/incrementcounter(_:by:)","abstract":[{"text":"Increments a counter by the specified amount","type":"text"}],"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/incrementCounter(_:by:)","role":"symbol","type":"topic","kind":"symbol","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"incrementCounter","kind":"identifier"},{"text":"(","kind":"text"},{"text":"String","preciseIdentifier":"s:SS","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"by","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"Int","preciseIdentifier":"s:Si","kind":"typeIdentifier"},{"text":") -> ","kind":"text"},{"kind":"typeIdentifier","text":"Int","preciseIdentifier":"s:Si"}],"title":"incrementCounter(_:by:)"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/DefaultContextProvider/ContextProviding-Implementations":{"url":"\/documentation\/specificationcore\/defaultcontextprovider\/contextproviding-implementations","type":"topic","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DefaultContextProvider\/ContextProviding-Implementations","role":"collectionGroup","title":"ContextProviding Implementations","abstract":[],"kind":"article"}}}