{"topicSections":[{"title":"Builder Pattern","identifiers":["doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/FirstMatchSpec\/Builder","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/FirstMatchSpec\/builder()"],"anchor":"Builder-Pattern"},{"title":"Decision Methods","identifiers":["doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/FirstMatchSpec\/decide(_:)"],"anchor":"Decision-Methods"},{"generated":true,"title":"Initializers","identifiers":["doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/FirstMatchSpec\/init(_:includeMetadata:)-6b3hg","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/FirstMatchSpec\/init(_:includeMetadata:)-72nzl"],"anchor":"Initializers"},{"generated":true,"title":"Instance Methods","identifiers":["doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/FirstMatchSpec\/decideWithMetadata(_:)"],"anchor":"Instance-Methods"},{"generated":true,"title":"Type Aliases","identifiers":["doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/FirstMatchSpec\/SpecificationPair"],"anchor":"Type-Aliases"},{"generated":true,"title":"Type Methods","identifiers":["doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/FirstMatchSpec\/withFallback(_:fallback:)-29la8","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/FirstMatchSpec\/withFallback(_:fallback:)-9qghu"],"anchor":"Type-Methods"}],"relationshipsSections":[{"type":"conformsTo","kind":"relationships","title":"Conforms To","identifiers":["doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DecisionSpec"]}],"sections":[],"kind":"symbol","seeAlsoSections":[{"title":"Related Documentation","identifiers":["doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DecisionSpec","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/Decides","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/Maybe"],"anchor":"Related-Documentation"},{"generated":true,"title":"Basic Specifications","identifiers":["doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/PredicateSpec","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/MaxCountSpec","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/CooldownIntervalSpec","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/TimeSinceEventSpec","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DateRangeSpec","doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DateComparisonSpec"],"anchor":"Basic-Specifications"}],"primaryContentSections":[{"declarations":[{"tokens":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"FirstMatchSpec"},{"kind":"text","text":"<"},{"kind":"genericParameter","text":"Context"},{"kind":"text","text":", "},{"kind":"genericParameter","text":"Result"},{"kind":"text","text":">"}],"platforms":["macOS"],"languages":["swift"]}],"kind":"declarations"},{"content":[{"anchor":"overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"FirstMatchSpec"},{"type":"text","text":" implements a priority-based decision system where specifications are"},{"type":"text","text":" "},{"text":"evaluated in order until one is satisfied. This is useful for tiered business rules,","type":"text"},{"text":" ","type":"text"},{"text":"routing decisions, discount calculations, and any scenario where you need to select","type":"text"},{"text":" ","type":"text"},{"text":"the first applicable option from a prioritized list.","type":"text"}]},{"level":2,"text":"Usage Examples","anchor":"Usage-Examples","type":"heading"},{"level":3,"text":"Discount Tier Selection","anchor":"Discount-Tier-Selection","type":"heading"},{"code":["let discountSpec = FirstMatchSpec([","    (PremiumMemberSpec(), 0.20),           \/\/ 20% for premium members","    (LoyalCustomerSpec(), 0.15),           \/\/ 15% for loyal customers","    (FirstTimeUserSpec(), 0.10),           \/\/ 10% for first-time users","    (RegularUserSpec(), 0.05)              \/\/ 5% for everyone else","])","","@Decides(using: discountSpec, or: 0.0)","var discountRate: Double"],"syntax":"swift","type":"codeListing"},{"level":3,"text":"Feature Experiment Assignment","anchor":"Feature-Experiment-Assignment","type":"heading"},{"code":["let experimentSpec = FirstMatchSpec([","    (UserSegmentSpec(expectedSegment: .beta), \"variant_a\"),","    (FeatureFlagSpec(flagKey: \"experiment_b\"), \"variant_b\"),","    (RandomPercentageSpec(percentage: 50), \"variant_c\")","])","","@Maybe(using: experimentSpec)","var experimentVariant: String?"],"syntax":"swift","type":"codeListing"},{"level":3,"text":"Content Routing","anchor":"Content-Routing","type":"heading"},{"code":["let routingSpec = FirstMatchSpec.builder()","    .add(UserSegmentSpec(expectedSegment: .premium), result: \"premium_content\")","    .add(DateRangeSpec(startDate: campaignStart, endDate: campaignEnd), result: \"campaign_content\")","    .add(MaxCountSpec(counterKey: \"onboarding_completed\", maximumCount: 1), result: \"onboarding_content\")","    .fallback(\"default_content\")","    .build()"],"syntax":"swift","type":"codeListing"},{"level":3,"text":"With Macro Integration","anchor":"With-Macro-Integration","type":"heading"},{"code":["@specs(","    FirstMatchSpec([","        (PremiumUserSpec(), \"premium_theme\"),","        (BetaUserSpec(), \"beta_theme\")","    ])",")","@AutoContext","struct ThemeSelectionSpec: DecisionSpec {","    typealias Context = EvaluationContext","    typealias Result = String","}"],"syntax":"swift","type":"codeListing"},{"inlineContent":[{"type":"text","text":"A decision specification that evaluates specifications in priority order and returns the result of the first match."}],"type":"paragraph"},{"level":2,"text":"Overview","anchor":"Overview","type":"heading"},{"inlineContent":[{"type":"codeVoice","code":"FirstMatchSpec"},{"text":" implements a priority-based decision system where specifications are evaluated in order until one is satisfied. This is essential for tiered business rules, routing decisions, discount calculations, and any scenario requiring selection from a prioritized list of options.","type":"text"}],"type":"paragraph"},{"level":3,"text":"Key Benefits","anchor":"Key-Benefits","type":"heading"},{"items":[{"content":[{"inlineContent":[{"inlineContent":[{"text":"Priority-Based","type":"text"}],"type":"strong"},{"type":"text","text":": Evaluates specifications in defined order"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"First Match Wins"}],"type":"strong"},{"type":"text","text":": Returns immediately upon first satisfaction"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Type-Safe Results"}]},{"text":": Generic result type ensures compile-time correctness","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"text":"Builder Pattern","type":"text"}]},{"type":"text","text":": Fluent interface for constructing decision chains"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"Metadata Support","type":"text"}],"type":"strong"},{"type":"text","text":": Optional tracking of which rule matched"}]}]}],"type":"unorderedList"},{"text":"When to Use FirstMatchSpec","anchor":"When-to-Use-FirstMatchSpec","type":"heading","level":3},{"inlineContent":[{"text":"Use ","type":"text"},{"code":"FirstMatchSpec","type":"codeVoice"},{"text":" when you need to:","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"text":"Implement tiered pricing or discount systems","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Route users to different experiences based on criteria"}]}]},{"content":[{"inlineContent":[{"text":"Select the first applicable rule from multiple options","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Make priority-based decisions with fallback values"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Implement feature experiment assignments","type":"text"}]}]}],"type":"unorderedList"},{"text":"Quick Example","anchor":"Quick-Example","type":"heading","level":2},{"code":["import SpecificationCore","","struct User {","    let tier: String","    let daysSinceRegistration: Int","    let isFirstPurchase: Bool","}","","\/\/ Define discount tiers in priority order","let discountSpec = FirstMatchSpec<User, Double>([","    (PremiumMemberSpec(), 0.20),      \/\/ 20% for premium","    (LoyalCustomerSpec(), 0.15),      \/\/ 15% for loyal","    (FirstTimeBuyerSpec(), 0.10),     \/\/ 10% for first-time","    (RegularUserSpec(), 0.05)         \/\/ 5% for everyone else","])","","\/\/ Use with property wrapper","@Decides(using: discountSpec, or: 0.0)","var discountRate: Double","","print(\"Discount: \\(discountRate)\")  \/\/ e.g., 0.20 for premium user"],"syntax":"swift","type":"codeListing"},{"anchor":"Creating-FirstMatchSpec","type":"heading","text":"Creating FirstMatchSpec","level":2},{"anchor":"From-Tuples","type":"heading","text":"From Tuples","level":3},{"type":"codeListing","syntax":"swift","code":["\/\/ Create with specification-result pairs","let routingSpec = FirstMatchSpec<User, String>([","    (PremiumUserSpec(), \"premium_dashboard\"),","    (BetaUserSpec(), \"beta_dashboard\"),","    (NewUserSpec(), \"onboarding_dashboard\")","])","","if let route = routingSpec.decide(user) {","    navigateTo(route)","}"]},{"type":"heading","level":3,"anchor":"With-Fallback","text":"With Fallback"},{"type":"codeListing","syntax":"swift","code":["\/\/ Ensure a result is always returned","let themeSpec = FirstMatchSpec.withFallback([","    (DarkModePreferenceSpec(), \"dark\"),","    (HighContrastSpec(), \"high_contrast\")","], fallback: \"light\")  \/\/ Default theme","","let theme = themeSpec.decide(context)  \/\/ Never nil"]},{"type":"heading","level":3,"anchor":"Using-Builder-Pattern","text":"Using Builder Pattern"},{"type":"codeListing","syntax":"swift","code":["let contentSpec = FirstMatchSpec<User, String>.builder()","    .add(SubscriberSpec(), result: \"premium_content\")","    .add(TrialUserSpec(), result: \"trial_content\")","    .add(NewUserSpec(), result: \"welcome_content\")","    .fallback(\"default_content\")","    .build()","","let content = contentSpec.decide(user) ?? \"error\""]},{"type":"heading","level":2,"anchor":"Priority-Based-Decisions","text":"Priority-Based Decisions"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Specifications are evaluated in array order:"}]},{"type":"codeListing","syntax":"swift","code":["\/\/ High priority first, low priority last","let supportTierSpec = FirstMatchSpec<User, String>([","    (EnterpriseCustomerSpec(), \"priority_support\"),    \/\/ Checked first","    (PremiumSubscriberSpec(), \"premium_support\"),      \/\/ Checked second","    (ActiveUserSpec(), \"standard_support\"),            \/\/ Checked third","    (RegisteredUserSpec(), \"basic_support\")            \/\/ Checked last","])","","\/\/ Returns first match","let tier = supportTierSpec.decide(user)"]},{"type":"heading","level":2,"anchor":"Using-with-Property-Wrappers","text":"Using with Property Wrappers"},{"type":"heading","level":3,"anchor":"Decides-Wrapper","text":"Decides Wrapper"},{"type":"paragraph","inlineContent":[{"text":"For non-optional results with fallback:","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["struct PricingViewModel {","    let user: User","","    @Decides([","        (PremiumUserSpec(), 9.99),","        (StudentUserSpec(), 4.99),","        (TrialUserSpec(), 0.00)","    ], or: 14.99)  \/\/ Regular price","    var monthlyPrice: Double","","    init(user: User) {","        self.user = user","        _monthlyPrice = Decides(","            [","                (PremiumUserSpec(), 9.99),","                (StudentUserSpec(), 4.99),","                (TrialUserSpec(), 0.00)","            ],","            or: 14.99,","            with: user","        )","    }","}"]},{"type":"heading","level":3,"anchor":"Maybe-Wrapper","text":"Maybe Wrapper"},{"type":"paragraph","inlineContent":[{"text":"For optional results without fallback:","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["struct BonusViewModel {","    let user: User","","    @Maybe([","        (LoyaltyMemberSpec(), \"loyalty_points\"),","        (ReferralUserSpec(), \"referral_bonus\")","    ])","    var availableBonus: String?","","    init(user: User) {","        self.user = user","        _availableBonus = Maybe(","            [","                (LoyaltyMemberSpec(), \"loyalty_points\"),","                (ReferralUserSpec(), \"referral_bonus\")","            ],","            with: user","        )","    }","}","","if let bonus = viewModel.availableBonus {","    print(\"Bonus available: \\(bonus)\")","}"]},{"type":"heading","level":2,"anchor":"Builder-Pattern","text":"Builder Pattern"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Construct decision specs fluently:"}]},{"type":"heading","level":3,"anchor":"Basic-Building","text":"Basic Building"},{"type":"codeListing","syntax":"swift","code":["let featureSpec = FirstMatchSpec<EvaluationContext, String>.builder()","    .add(FeatureFlagSpec(flagKey: \"new_feature\"), result: \"new_ui\")","    .add(BetaTesterSpec(), result: \"beta_ui\")","    .build()"]},{"type":"heading","level":3,"anchor":"With-Predicates","text":"With Predicates"},{"type":"codeListing","syntax":"swift","code":["let experimentSpec = FirstMatchSpec<User, String>.builder()","    .add({ $0.tier == \"enterprise\" }, result: \"variant_a\")","    .add({ $0.daysSinceRegistration < 30 }, result: \"variant_b\")","    .add({ $0.age >= 65 }, result: \"variant_c\")","    .fallback(\"control\")","    .build()"]},{"type":"heading","level":3,"anchor":"With-Metadata-Tracking","text":"With Metadata Tracking"},{"type":"codeListing","syntax":"swift","code":["let spec = FirstMatchSpec<User, String>.builder()","    .add(PremiumSpec(), result: \"premium\")","    .add(TrialSpec(), result: \"trial\")","    .withMetadata(true)","    .build()","","if let (result, index) = spec.decideWithMetadata(user) {","    print(\"Matched rule #\\(index): \\(result)\")","}"]},{"type":"heading","level":2,"anchor":"Metadata-and-Debugging","text":"Metadata and Debugging"},{"type":"paragraph","inlineContent":[{"text":"Track which specification matched:","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["let ruleSpec = FirstMatchSpec<User, String>([","    (Rule1Spec(), \"action_1\"),","    (Rule2Spec(), \"action_2\"),","    (Rule3Spec(), \"action_3\")","], includeMetadata: true)","","\/\/ Get result with index","if let (action, index) = ruleSpec.decideWithMetadata(user) {","    print(\"Matched rule at index \\(index): \\(action)\")","    \/\/ Matched rule at index 1: action_2","}"]},{"type":"heading","level":2,"anchor":"Real-World-Examples","text":"Real-World Examples"},{"type":"heading","level":3,"anchor":"Discount-Calculation","text":"Discount Calculation"},{"type":"codeListing","syntax":"swift","code":["struct Order {","    let total: Decimal","    let itemCount: Int","    let customerTier: String","}","","let discountSpec = FirstMatchSpec<Order, Decimal>.builder()","    .add({ $0.total >= 500 }, result: 100.0)  \/\/ $100 off orders over $500","    .add({ $0.itemCount >= 10 }, result: 50.0)  \/\/ $50 off 10+ items","    .add({ $0.customerTier == \"VIP\" }, result: 25.0)  \/\/ $25 VIP discount","    .fallback(0.0)  \/\/ No discount","    .build()","","let discount = discountSpec.decide(order) ?? 0.0"]},{"type":"heading","level":3,"anchor":"Content-Routing","text":"Content Routing"},{"code":["let routingSpec = FirstMatchSpec<EvaluationContext, String>.builder()","    .add(","        PredicateSpec.flag(\"maintenance_mode\"),","        result: \"maintenance_page\"","    )","    .add(","        PredicateSpec.counter(\"onboarding_completed\", .equal, 0),","        result: \"onboarding_flow\"","    )","    .add(","        PredicateSpec.flag(\"premium_user\"),","        result: \"premium_dashboard\"","    )","    .fallback(\"standard_dashboard\")","    .build()","","let route = routingSpec.decide(context) ?? \"error_page\"","navigateTo(route)"],"type":"codeListing","syntax":"swift"},{"anchor":"Feature-Experiment-Assignment","type":"heading","text":"Feature Experiment Assignment","level":3},{"code":["enum ExperimentVariant: String {","    case control = \"control\"","    case variantA = \"variant_a\"","    case variantB = \"variant_b\"","    case variantC = \"variant_c\"","}","","let experimentSpec = FirstMatchSpec<User, ExperimentVariant>.builder()","    .add(","        BetaTesterSpec(),","        result: .variantA","    )","    .add(","        { user in user.id.hashValue % 3 == 0 },","        result: .variantB","    )","    .add(","        { user in user.id.hashValue % 3 == 1 },","        result: .variantC","    )","    .fallback(.control)","    .build()","","let variant = experimentSpec.decide(user) ?? .control"],"type":"codeListing","syntax":"swift"},{"anchor":"Notification-Priority","type":"heading","text":"Notification Priority","level":3},{"code":["enum NotificationPriority {","    case critical","    case high","    case normal","    case low","}","","let prioritySpec = FirstMatchSpec<Notification, NotificationPriority>([","    (SecurityAlertSpec(), .critical),","    (PaymentDueSpec(), .high),","    (MessageReceivedSpec(), .normal),","    (NewsletterSpec(), .low)","])","","if let priority = prioritySpec.decide(notification) {","    sendNotification(notification, priority: priority)","}"],"type":"codeListing","syntax":"swift"},{"anchor":"Pricing-Tier-Selection","type":"heading","text":"Pricing Tier Selection","level":3},{"code":["struct PricingTier {","    let name: String","    let monthlyPrice: Decimal","    let features: [String]","}","","let pricingSpec = FirstMatchSpec<User, PricingTier>.builder()","    .add(","        EnterpriseContractSpec(),","        result: PricingTier(","            name: \"Enterprise\",","            monthlyPrice: 999.99,","            features: [\"Unlimited\", \"Priority Support\", \"Custom Integration\"]","        )","    )","    .add(","        TeamAccountSpec(),","        result: PricingTier(","            name: \"Team\",","            monthlyPrice: 49.99,","            features: [\"Up to 25 users\", \"Standard Support\"]","        )","    )","    .add(","        IndividualUserSpec(),","        result: PricingTier(","            name: \"Pro\",","            monthlyPrice: 9.99,","            features: [\"Single user\", \"Email Support\"]","        )","    )","    .fallback(","        PricingTier(","            name: \"Free\",","            monthlyPrice: 0.00,","            features: [\"Limited\"]","        )","    )","    .build()","","let tier = pricingSpec.decide(user)!"],"type":"codeListing","syntax":"swift"},{"anchor":"Combining-with-Context","type":"heading","text":"Combining with Context","level":2},{"inlineContent":[{"text":"Use with ","type":"text"},{"isActive":true,"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext","type":"reference"},{"text":" for dynamic decisions:","type":"text"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["let featureAccessSpec = FirstMatchSpec<EvaluationContext, [String]>.builder()","    .add(","        PredicateSpec.flag(\"admin_access\"),","        result: [\"admin\", \"premium\", \"standard\", \"basic\"]","    )","    .add(","        PredicateSpec.flag(\"premium_user\"),","        result: [\"premium\", \"standard\", \"basic\"]","    )","    .add(","        PredicateSpec.counter(\"login_count\", .greaterThan, 10),","        result: [\"standard\", \"basic\"]","    )","    .fallback([\"basic\"])","    .build()","","let provider = DefaultContextProvider.shared","provider.setFlag(\"premium_user\", to: true)","","let context = provider.currentContext()","let features = featureAccessSpec.decide(context) ?? []"]},{"level":2,"text":"Best Practices","anchor":"Best-Practices","type":"heading"},{"level":3,"text":"Order Matters","anchor":"Order-Matters","type":"heading"},{"syntax":"swift","type":"codeListing","code":["\/\/ ✅ Good - most specific first","let spec = FirstMatchSpec([","    (VIPCustomerSpec(), \"vip_service\"),     \/\/ Most specific","    (PremiumUserSpec(), \"premium_service\"), \/\/ Less specific","    (ActiveUserSpec(), \"standard_service\")  \/\/ Least specific","])","","\/\/ ❌ Wrong - general rules first prevent specific matches","let badSpec = FirstMatchSpec([","    (ActiveUserSpec(), \"standard_service\"), \/\/ Catches everyone","    (PremiumUserSpec(), \"premium_service\"), \/\/ Never reached","    (VIPCustomerSpec(), \"vip_service\")      \/\/ Never reached","])"]},{"level":3,"anchor":"Always-Provide-Fallback-for-Critical-Decisions","text":"Always Provide Fallback for Critical Decisions","type":"heading"},{"syntax":"swift","code":["\/\/ ✅ Good - guaranteed result","let spec = FirstMatchSpec.withFallback([","    (PremiumSpec(), \"premium_experience\")","], fallback: \"default_experience\")","","\/\/ ❌ Risky - might return nil","let riskySpec = FirstMatchSpec([","    (PremiumSpec(), \"premium_experience\")","])","","\/\/ Need to handle nil","let experience = riskySpec.decide(user) ?? \"error\""],"type":"codeListing"},{"text":"Use Builder for Complex Decisions","type":"heading","level":3,"anchor":"Use-Builder-for-Complex-Decisions"},{"code":["\/\/ ✅ Good - clear and maintainable","let spec = FirstMatchSpec<User, String>.builder()","    .add(Spec1(), result: \"result1\")","    .add(Spec2(), result: \"result2\")","    .add(Spec3(), result: \"result3\")","    .fallback(\"default\")","    .build()","","\/\/ ❌ Harder to read - array of tuples","let spec = FirstMatchSpec([","    (Spec1(), \"result1\"),","    (Spec2(), \"result2\"),","    (Spec3(), \"result3\"),","    (AlwaysTrueSpec(), \"default\")","])"],"syntax":"swift","type":"codeListing"},{"anchor":"Type-Consistency","text":"Type Consistency","level":3,"type":"heading"},{"syntax":"swift","code":["\/\/ ✅ Good - consistent result types","let spec = FirstMatchSpec<User, String>([","    (Spec1(), \"option_a\"),","    (Spec2(), \"option_b\"),","    (Spec3(), \"option_c\")","])","","\/\/ Compiler enforces type consistency"],"type":"codeListing"},{"anchor":"Performance-Considerations","text":"Performance Considerations","level":2,"type":"heading"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"Short-Circuit Evaluation","type":"text"}],"type":"strong"},{"text":": Stops at first match; no unnecessary evaluations","type":"text"}]}]},{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"Order Optimization"}],"type":"strong"},{"text":": Place most likely matches first for better performance","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Metadata Overhead"}]},{"type":"text","text":": Minimal; only stores index when requested"}]}]},{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"Builder Allocation"}],"type":"strong"},{"type":"text","text":": Creates array; efficient for reasonable rule counts"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"Type Erasure"}],"type":"strong"},{"text":": Uses ","type":"text"},{"type":"codeVoice","code":"AnySpecification"},{"text":" internally; minimal overhead","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"}],"kind":"content"}],"abstract":[{"text":"A decision specification that evaluates child specifications in order and returns","type":"text"},{"text":" ","type":"text"},{"text":"the result of the first one that is satisfied.","type":"text"}],"schemaVersion":{"minor":3,"major":0,"patch":0},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/specificationcore\/firstmatchspec"]}],"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/FirstMatchSpec"},"metadata":{"fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"FirstMatchSpec","kind":"identifier"}],"symbolKind":"struct","roleHeading":"Structure","role":"symbol","title":"FirstMatchSpec","navigatorTitle":[{"text":"FirstMatchSpec","kind":"identifier"}],"modules":[{"name":"SpecificationCore"}],"externalID":"s:17SpecificationCore14FirstMatchSpecV"},"hierarchy":{"paths":[["doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore"]]},"references":{"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/FirstMatchSpec/decide(_:)":{"abstract":[{"type":"text","text":"Evaluates the specifications in order and returns the result of the first one that is satisfied"}],"kind":"symbol","url":"\/documentation\/specificationcore\/firstmatchspec\/decide(_:)","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/FirstMatchSpec\/decide(_:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"decide"},{"kind":"text","text":"("},{"kind":"typeIdentifier","preciseIdentifier":"s:17SpecificationCore14FirstMatchSpecV7Contextxmfp","text":"Context"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","preciseIdentifier":"s:17SpecificationCore14FirstMatchSpecV6Resultq_mfp","text":"Result"},{"kind":"text","text":"?"}],"title":"decide(_:)","type":"topic","role":"symbol"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/DateRangeSpec":{"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DateRangeSpec","url":"\/documentation\/specificationcore\/daterangespec","abstract":[{"text":"Succeeds when ","type":"text"},{"type":"codeVoice","code":"currentDate"},{"type":"text","text":" is within the inclusive range [start, end]."}],"kind":"symbol","fragments":[{"text":"struct","kind":"keyword"},{"kind":"text","text":" "},{"text":"DateRangeSpec","kind":"identifier"}],"title":"DateRangeSpec","type":"topic","role":"symbol","navigatorTitle":[{"text":"DateRangeSpec","kind":"identifier"}]},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/FirstMatchSpec/withFallback(_:fallback:)-29la8":{"url":"\/documentation\/specificationcore\/firstmatchspec\/withfallback(_:fallback:)-29la8","abstract":[{"text":"Creates a FirstMatchSpec with a fallback result","type":"text"}],"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/FirstMatchSpec\/withFallback(_:fallback:)-29la8","role":"symbol","type":"topic","kind":"symbol","fragments":[{"text":"static","kind":"keyword"},{"text":" ","kind":"text"},{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"withFallback","kind":"identifier"},{"text":"<","kind":"text"},{"text":"S","kind":"genericParameter"},{"text":">([(","kind":"text"},{"preciseIdentifier":"s:17SpecificationCore14FirstMatchSpecV12withFallback_8fallbackACyxq_GSayqd___q_tG_q_t1TQyd__RszAA0A0Rd__lFZ1SL_qd__mfp","text":"S","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"preciseIdentifier":"s:17SpecificationCore14FirstMatchSpecV6Resultq_mfp","text":"Result","kind":"typeIdentifier"},{"text":")], ","kind":"text"},{"text":"fallback","kind":"externalParam"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:17SpecificationCore14FirstMatchSpecV6Resultq_mfp","text":"Result","kind":"typeIdentifier"},{"text":") -> ","kind":"text"},{"preciseIdentifier":"s:17SpecificationCore14FirstMatchSpecV","text":"FirstMatchSpec","kind":"typeIdentifier"},{"text":"<","kind":"text"},{"preciseIdentifier":"s:17SpecificationCore14FirstMatchSpecV7Contextxmfp","text":"Context","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"preciseIdentifier":"s:17SpecificationCore14FirstMatchSpecV6Resultq_mfp","text":"Result","kind":"typeIdentifier"},{"text":">","kind":"text"}],"title":"withFallback(_:fallback:)"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/CooldownIntervalSpec":{"fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"CooldownIntervalSpec"}],"type":"topic","kind":"symbol","abstract":[{"type":"text","text":"A specification that ensures enough time has passed since the last occurrence of an event."},{"type":"text","text":" "},{"type":"text","text":"This is particularly useful for implementing cooldown periods for actions like showing banners,"},{"type":"text","text":" "},{"type":"text","text":"notifications, or any other time-sensitive operations that shouldn’t happen too frequently."}],"url":"\/documentation\/specificationcore\/cooldownintervalspec","title":"CooldownIntervalSpec","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/CooldownIntervalSpec","role":"symbol","navigatorTitle":[{"kind":"identifier","text":"CooldownIntervalSpec"}]},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/FirstMatchSpec/init(_:includeMetadata:)-72nzl":{"abstract":[{"text":"Creates a new FirstMatchSpec with the given specification-result pairs","type":"text"}],"fragments":[{"text":"init","kind":"identifier"},{"text":"([","kind":"text"},{"text":"SpecificationPair","preciseIdentifier":"s:17SpecificationCore14FirstMatchSpecV0A4Paira","kind":"typeIdentifier"},{"text":"], ","kind":"text"},{"text":"includeMetadata","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"Bool","preciseIdentifier":"s:Sb","kind":"typeIdentifier"},{"text":")","kind":"text"}],"title":"init(_:includeMetadata:)","kind":"symbol","role":"symbol","type":"topic","url":"\/documentation\/specificationcore\/firstmatchspec\/init(_:includemetadata:)-72nzl","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/FirstMatchSpec\/init(_:includeMetadata:)-72nzl"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/FirstMatchSpec/decideWithMetadata(_:)":{"url":"\/documentation\/specificationcore\/firstmatchspec\/decidewithmetadata(_:)","abstract":[{"text":"Evaluates the specifications in order and returns the result and metadata of the first one that is satisfied","type":"text"}],"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/FirstMatchSpec\/decideWithMetadata(_:)","role":"symbol","type":"topic","kind":"symbol","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"decideWithMetadata","kind":"identifier"},{"text":"(","kind":"text"},{"preciseIdentifier":"s:17SpecificationCore14FirstMatchSpecV7Contextxmfp","text":"Context","kind":"typeIdentifier"},{"text":") -> (result","kind":"text"},{"text":": ","kind":"text"},{"text":"Result","preciseIdentifier":"s:17SpecificationCore14FirstMatchSpecV6Resultq_mfp","kind":"typeIdentifier"},{"text":", index","kind":"text"},{"text":": ","kind":"text"},{"text":"Int","preciseIdentifier":"s:Si","kind":"typeIdentifier"},{"text":")?","kind":"text"}],"title":"decideWithMetadata(_:)"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/PredicateSpec":{"role":"symbol","kind":"symbol","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"PredicateSpec","kind":"identifier"}],"abstract":[{"text":"A specification that accepts a closure for arbitrary logic.","type":"text"},{"text":" ","type":"text"},{"text":"This provides maximum flexibility for custom business rules that don’t fit","type":"text"},{"text":" ","type":"text"},{"text":"into the standard specification patterns.","type":"text"}],"type":"topic","url":"\/documentation\/specificationcore\/predicatespec","title":"PredicateSpec","navigatorTitle":[{"text":"PredicateSpec","kind":"identifier"}],"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/PredicateSpec"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/Decides":{"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/Decides","kind":"symbol","type":"topic","abstract":[{"text":"A property wrapper that evaluates decision specifications and always returns a non-optional result.","type":"text"}],"title":"Decides","navigatorTitle":[{"text":"Decides","kind":"identifier"}],"url":"\/documentation\/specificationcore\/decides","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Decides","kind":"identifier"}],"role":"symbol"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/EvaluationContext":{"navigatorTitle":[{"text":"EvaluationContext","kind":"identifier"}],"type":"topic","kind":"symbol","url":"\/documentation\/specificationcore\/evaluationcontext","title":"EvaluationContext","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/EvaluationContext","abstract":[{"type":"text","text":"A context object that holds data needed for specification evaluation."},{"type":"text","text":" "},{"text":"This serves as a container for all the information that specifications might need","type":"text"},{"type":"text","text":" "},{"type":"text","text":"to make their decisions, such as timestamps, counters, user state, etc."}],"role":"symbol","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"EvaluationContext","kind":"identifier"}]},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/FirstMatchSpec/init(_:includeMetadata:)-6b3hg":{"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/FirstMatchSpec\/init(_:includeMetadata:)-6b3hg","fragments":[{"kind":"identifier","text":"init"},{"kind":"text","text":"<"},{"kind":"genericParameter","text":"S"},{"kind":"text","text":">([("},{"kind":"typeIdentifier","text":"S","preciseIdentifier":"s:17SpecificationCore14FirstMatchSpecV_15includeMetadataACyxq_GSayqd___q_tG_Sbtc1TQyd__RszAA0A0Rd__lufc1SL_qd__mfp"},{"kind":"text","text":", "},{"preciseIdentifier":"s:17SpecificationCore14FirstMatchSpecV6Resultq_mfp","kind":"typeIdentifier","text":"Result"},{"kind":"text","text":")], "},{"kind":"externalParam","text":"includeMetadata"},{"text":": ","kind":"text"},{"text":"Bool","preciseIdentifier":"s:Sb","kind":"typeIdentifier"},{"text":")","kind":"text"}],"title":"init(_:includeMetadata:)","kind":"symbol","role":"symbol","type":"topic","url":"\/documentation\/specificationcore\/firstmatchspec\/init(_:includemetadata:)-6b3hg","abstract":[{"type":"text","text":"Creates a new FirstMatchSpec with specification-result pairs"}]},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/MaxCountSpec":{"navigatorTitle":[{"text":"MaxCountSpec","kind":"identifier"}],"type":"topic","kind":"symbol","url":"\/documentation\/specificationcore\/maxcountspec","title":"MaxCountSpec","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/MaxCountSpec","abstract":[{"type":"text","text":"A specification that checks if a counter is below a maximum threshold."},{"type":"text","text":" "},{"type":"text","text":"This is useful for implementing limits on actions, display counts, or usage restrictions."}],"role":"symbol","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"MaxCountSpec","kind":"identifier"}]},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/FirstMatchSpec/withFallback(_:fallback:)-9qghu":{"url":"\/documentation\/specificationcore\/firstmatchspec\/withfallback(_:fallback:)-9qghu","fragments":[{"text":"static","kind":"keyword"},{"text":" ","kind":"text"},{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"withFallback","kind":"identifier"},{"text":"([","kind":"text"},{"preciseIdentifier":"s:17SpecificationCore14FirstMatchSpecV0A4Paira","text":"SpecificationPair","kind":"typeIdentifier"},{"text":"], ","kind":"text"},{"text":"fallback","kind":"externalParam"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:17SpecificationCore14FirstMatchSpecV6Resultq_mfp","text":"Result","kind":"typeIdentifier"},{"text":") -> ","kind":"text"},{"preciseIdentifier":"s:17SpecificationCore14FirstMatchSpecV","text":"FirstMatchSpec","kind":"typeIdentifier"},{"text":"<","kind":"text"},{"preciseIdentifier":"s:17SpecificationCore14FirstMatchSpecV7Contextxmfp","text":"Context","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"preciseIdentifier":"s:17SpecificationCore14FirstMatchSpecV6Resultq_mfp","text":"Result","kind":"typeIdentifier"},{"text":">","kind":"text"}],"title":"withFallback(_:fallback:)","kind":"symbol","role":"symbol","type":"topic","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/FirstMatchSpec\/withFallback(_:fallback:)-9qghu","abstract":[{"text":"Creates a FirstMatchSpec with a fallback result","type":"text"}]},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/FirstMatchSpec":{"url":"\/documentation\/specificationcore\/firstmatchspec","type":"topic","navigatorTitle":[{"text":"FirstMatchSpec","kind":"identifier"}],"abstract":[{"text":"A decision specification that evaluates child specifications in order and returns","type":"text"},{"text":" ","type":"text"},{"text":"the result of the first one that is satisfied.","type":"text"}],"title":"FirstMatchSpec","kind":"symbol","role":"symbol","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"FirstMatchSpec","kind":"identifier"}],"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/FirstMatchSpec"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/FirstMatchSpec/SpecificationPair":{"role":"symbol","kind":"symbol","fragments":[{"text":"typealias","kind":"keyword"},{"text":" ","kind":"text"},{"text":"SpecificationPair","kind":"identifier"}],"title":"FirstMatchSpec.SpecificationPair","abstract":[{"type":"text","text":"A pair consisting of a specification and its associated result"}],"url":"\/documentation\/specificationcore\/firstmatchspec\/specificationpair","type":"topic","navigatorTitle":[{"text":"SpecificationPair","kind":"identifier"}],"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/FirstMatchSpec\/SpecificationPair"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/FirstMatchSpec/builder()":{"role":"symbol","kind":"symbol","fragments":[{"text":"static","kind":"keyword"},{"text":" ","kind":"text"},{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"builder","kind":"identifier"},{"text":"() -> ","kind":"text"},{"text":"Builder","kind":"typeIdentifier","preciseIdentifier":"s:17SpecificationCore14FirstMatchSpecV7BuilderC"},{"text":"<","kind":"text"},{"text":"Context","kind":"typeIdentifier","preciseIdentifier":"s:17SpecificationCore14FirstMatchSpecV7Contextxmfp"},{"text":", ","kind":"text"},{"text":"Result","kind":"typeIdentifier","preciseIdentifier":"s:17SpecificationCore14FirstMatchSpecV6Resultq_mfp"},{"text":">","kind":"text"}],"abstract":[{"text":"Creates a new builder for constructing a FirstMatchSpec","type":"text"}],"title":"builder()","type":"topic","url":"\/documentation\/specificationcore\/firstmatchspec\/builder()","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/FirstMatchSpec\/builder()"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/DecisionSpec":{"fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"text":"DecisionSpec","kind":"identifier"}],"type":"topic","kind":"symbol","abstract":[{"text":"A protocol for specifications that can return a typed result instead of just a boolean.","type":"text"},{"text":" ","type":"text"},{"text":"This extends the specification pattern to support decision-making with payload results.","type":"text"}],"url":"\/documentation\/specificationcore\/decisionspec","title":"DecisionSpec","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DecisionSpec","role":"symbol","navigatorTitle":[{"kind":"identifier","text":"DecisionSpec"}]},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/FirstMatchSpec/Builder":{"url":"\/documentation\/specificationcore\/firstmatchspec\/builder","abstract":[{"type":"text","text":"A builder for creating FirstMatchSpec instances using a fluent interface"}],"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/FirstMatchSpec\/Builder","role":"symbol","type":"topic","kind":"symbol","navigatorTitle":[{"text":"Builder","kind":"identifier"}],"fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Builder","kind":"identifier"}],"title":"FirstMatchSpec.Builder"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore":{"type":"topic","kind":"symbol","url":"\/documentation\/specificationcore","title":"SpecificationCore","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore","abstract":[{"type":"text","text":"Platform-independent core for building specification-based business logic in Swift."}],"role":"collection"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/TimeSinceEventSpec":{"url":"\/documentation\/specificationcore\/timesinceeventspec","abstract":[{"type":"text","text":"A specification that checks if a minimum duration has passed since a specific event."},{"type":"text","text":" "},{"text":"This is useful for implementing cooldown periods, delays, or time-based restrictions.","type":"text"}],"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/TimeSinceEventSpec","role":"symbol","type":"topic","kind":"symbol","navigatorTitle":[{"kind":"identifier","text":"TimeSinceEventSpec"}],"fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"TimeSinceEventSpec","kind":"identifier"}],"title":"TimeSinceEventSpec"},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/Maybe":{"navigatorTitle":[{"text":"Maybe","kind":"identifier"}],"type":"topic","kind":"symbol","url":"\/documentation\/specificationcore\/maybe","title":"Maybe","identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/Maybe","abstract":[{"text":"A property wrapper that evaluates decision specifications and returns an optional result.","type":"text"}],"role":"symbol","fragments":[{"kind":"keyword","text":"struct"},{"text":" ","kind":"text"},{"text":"Maybe","kind":"identifier"}]},"doc://specificationcore.SpecificationCore/documentation/SpecificationCore/DateComparisonSpec":{"type":"topic","navigatorTitle":[{"text":"DateComparisonSpec","kind":"identifier"}],"title":"DateComparisonSpec","url":"\/documentation\/specificationcore\/datecomparisonspec","kind":"symbol","abstract":[{"text":"Compares the date of a stored event to a reference date using before\/after.","type":"text"}],"identifier":"doc:\/\/specificationcore.SpecificationCore\/documentation\/SpecificationCore\/DateComparisonSpec","role":"symbol","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"DateComparisonSpec","kind":"identifier"}]}}}