============================= test session starts ==============================
platform darwin -- Python 3.10.19, pytest-9.0.2, pluggy-1.6.0
rootdir: /Users/egor/Development/GitHub/docc2context-service
configfile: pyproject.toml
plugins: anyio-4.12.0, asyncio-1.3.0, cov-7.0.0
asyncio: mode=strict, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collected 25 items

tests/test_security.py .........................                         [100%]

=============================== warnings summary ===============================
../../../../../opt/homebrew/lib/python3.10/site-packages/pythonjsonlogger/jsonlogger.py:11
  /opt/homebrew/lib/python3.10/site-packages/pythonjsonlogger/jsonlogger.py:11: DeprecationWarning: pythonjsonlogger.jsonlogger has been moved to pythonjsonlogger.json
    warnings.warn(

app/main.py:120
  /Users/egor/Development/GitHub/docc2context-service/app/main.py:120: DeprecationWarning: 
          on_event is deprecated, use lifespan event handlers instead.
  
          Read more about it in the
          [FastAPI docs for Lifespan Events](https://fastapi.tiangolo.com/advanced/events/).
          
    @app.on_event("startup")

../../../../../opt/homebrew/lib/python3.10/site-packages/fastapi/applications.py:4576
../../../../../opt/homebrew/lib/python3.10/site-packages/fastapi/applications.py:4576
  /opt/homebrew/lib/python3.10/site-packages/fastapi/applications.py:4576: DeprecationWarning: 
          on_event is deprecated, use lifespan event handlers instead.
  
          Read more about it in the
          [FastAPI docs for Lifespan Events](https://fastapi.tiangolo.com/advanced/events/).
          
    return self.router.on_event(event_type)

app/main.py:141
  /Users/egor/Development/GitHub/docc2context-service/app/main.py:141: DeprecationWarning: 
          on_event is deprecated, use lifespan event handlers instead.
  
          Read more about it in the
          [FastAPI docs for Lifespan Events](https://fastapi.tiangolo.com/advanced/events/).
          
    @app.on_event("shutdown")

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
______________ coverage: platform darwin, python 3.10.19-final-0 _______________

Name                                  Stmts   Miss  Cover   Missing
-------------------------------------------------------------------
app/__init__.py                           0      0   100%
app/api/__init__.py                       0      0   100%
app/api/v1/__init__.py                    4      0   100%
app/api/v1/endpoints.py                  61     46    25%   56-74, 115-249
app/core/__init__.py                      0      0   100%
app/core/config.py                       65     17    74%   68-77, 88-89, 99, 104, 110-117
app/core/conversion_pipeline.py          16     16     0%   3-47
app/core/health_service.py                9      9     0%   3-29
app/core/logging.py                      57     23    60%   21-24, 93-109, 126-137, 156-168, 185-196
app/core/metrics.py                      10      0   100%
app/core/security.py                     16     10    38%   13-47, 52
app/core/subprocess_manager.py           15     15     0%   3-48
app/main.py                              76     41    46%   46, 62, 68, 74, 81-102, 108-117, 123-138, 144-145
app/services/__init__.py                  0      0   100%
app/services/conversion_pipeline.py     137     68    50%   47, 51-55, 141, 146-151, 191-196, 213-217, 221-230, 247-344, 356-374, 390-427, 443-496
app/services/file_validation.py         105     43    59%   37-49, 56-70, 76, 99-103, 111-116, 135, 187-191, 214-218, 246-305
app/services/health_service.py          100     83    17%   28-44, 59-90, 99-147, 160-181, 193-246
app/services/response_streaming.py       52     52     0%   3-199
app/services/subprocess_manager.py      128     69    46%   20-24, 27, 64-200, 212-219, 236-270, 327, 341-345, 391-395
app/services/workspace_manager.py        70     49    30%   25, 29-61, 65-78, 99-120, 125-126, 135-186
-------------------------------------------------------------------
TOTAL                                   921    541    41%
Coverage HTML written to dir htmlcov
======================== 25 passed, 5 warnings in 0.35s ========================
