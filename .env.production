# Production Environment Configuration
# Copy this file to .env and customize for your production environment
# SECURITY: Do NOT commit .env file to version control

# === CRITICAL SECURITY SETTINGS ===
# These MUST be set correctly or the service will not start in production

# Environment mode
ENVIRONMENT=production

# Swagger/API Documentation - MUST BE FALSE IN PRODUCTION
SWAGGER_ENABLED=false

# CORS - MUST NOT BE ["*"] IN PRODUCTION
# Set to your actual domain(s), e.g., ["https://yourdomain.com"]
# Multiple origins: ["https://yourdomain.com", "https://api.yourdomain.com"]
CORS_ORIGINS=["https://yourdomain.com"]

# Allowed hosts for Host header validation
# Set to your actual domain(s)
ALLOWED_HOSTS=["yourdomain.com", "api.yourdomain.com"]

# === API CONFIGURATION ===
API_HOST=0.0.0.0
API_PORT=8000

# === LOGGING ===
# Set to WARNING or ERROR in production to reduce log volume
LOG_LEVEL=INFO

# === ELK STACK CONFIGURATION (Task 5.3) ===
# Elasticsearch connection
ELASTICSEARCH_HOST=elasticsearch
ELASTICSEARCH_PORT=9200

# Logstash connection (for syslog-style logging)
LOGSTASH_HOST=logstash
LOGSTASH_PORT=5000

# Kibana dashboard access
KIBANA_URL=http://kibana:5601

# Log retention policy (in days)
LOG_RETENTION_SECURITY=90
LOG_RETENTION_OPERATIONAL=30

# === FILE UPLOAD LIMITS ===
# Maximum upload file size (in MB)
MAX_UPLOAD_SIZE_MB=100

# Maximum decompressed/extracted size (in MB)
MAX_DECOMPRESSED_SIZE_MB=500

# Maximum number of files in a ZIP archive
MAX_ZIP_FILES=5000

# Maximum directory depth in ZIP archive
MAX_ZIP_DEPTH=10

# === WORKSPACE CONFIGURATION ===
# Base path for temporary workspaces
# Ensure sufficient disk space and proper permissions
WORKSPACE_BASE_PATH=/tmp

# Prefix for workspace directory names
WORKSPACE_PREFIX=swift-conv

# Directory permissions (octal)
WORKSPACE_PERMISSIONS=0o700

# Maximum age for workspace cleanup (in seconds, 1 hour = 3600)
WORKSPACE_MAX_AGE_SECONDS=3600

# === SUBPROCESS CONFIGURATION ===
# Path to Swift CLI binary
SWIFT_CLI_PATH=/usr/local/bin/docc2context

# Timeout for subprocess execution (in seconds)
SUBPROCESS_TIMEOUT=60

# Maximum retry attempts for subprocess
MAX_SUBPROCESS_RETRIES=3

# Memory limit for subprocess (in MB)
SUBPROCESS_MEMORY_LIMIT_MB=1024

# === RATE LIMITING ===
# Maximum requests per minute per IP
RATE_LIMIT=100

# === APPLICATION METADATA ===
APP_NAME=DocC2Context Service
APP_VERSION=0.1.0
APP_DESCRIPTION=Swift DocC to Markdown Web Converter (MVP)

# === NOTES ===
# 1. NEVER commit this file with actual values to version control
# 2. Use a secrets management system (Vault, AWS Secrets Manager, etc.) for production
# 3. Verify all security settings before deployment:
#    - SWAGGER_ENABLED=false
#    - CORS_ORIGINS does not contain ["*"]
#    - ALLOWED_HOSTS matches your domain
# 4. Run with: source .env && python -m uvicorn app.main:app
